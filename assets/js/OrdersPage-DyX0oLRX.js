import{r as s,u as e,a as r,j as t,aN as i,B as a,C as n,A as o,T as l,ay as d,H as x,$ as c,aO as m,aP as h,aQ as f,aR as y,aS as p,aT as j,v as u,ak as g,p as b,h as v,a8 as _,N as S,aE as z,aF as F,D as A,b as w,I as W,i as C,c as I,aU as D,aI as k,a6 as O,m as P,aJ as $,aV as B,aL as H,g as T,aW as L,aH as R,aD as E,aX as N,J as V,aY as M,K as U}from"./mui-CLbw_gaj.js";import{a as X,s as Y}from"./index-Cnr8SIWr.js";import"./vendor-HnKmhvXM.js";import"./utils-CeR3a_hx.js";import"./router-BiFerjYI.js";const J=()=>{const[J,Q]=s.useState([]),[q,K]=s.useState(!0),[G,Z]=s.useState(null),[ss,es]=s.useState(null),[rs,ts]=s.useState(!1),[is,as]=s.useState(!1),ns=e(),os=r(ns.breakpoints.down("md"));s.useEffect(()=>{ls()},[]);const ls=async()=>{try{K(!0),Z(null);const s=await X.get("/customer/orders");s.data.success?Q(s.data.orders||[]):Z("Failed to fetch orders")}catch(s){Z(s.response?.data?.message||s.response?.data?.error||"Failed to fetch orders")}finally{K(!1)}},ds=s=>{switch(s?.toLowerCase()){case"pending":return"warning";case"processing":return"info";case"shipped":return"primary";case"delivered":return"success";case"cancelled":return"error";default:return"default"}},xs=s=>{switch(s?.toLowerCase()){case"pending":return t.jsx(N,{});case"processing":default:return t.jsx(x,{});case"shipped":return t.jsx(E,{});case"delivered":return t.jsx(R,{});case"cancelled":return t.jsx(L,{})}},cs=s=>{switch(s?.toLowerCase()){case"razorpay":case"cod":default:return t.jsx(V,{});case"card":return t.jsx(U,{});case"bank_transfer":return t.jsx(M,{})}},ms=s=>{if(!s||"N/A"===s)return"Cash on Delivery";switch(s?.toLowerCase()){case"razorpay":return"Razorpay";case"card":return"Credit/Debit Card";case"bank_transfer":return"Bank Transfer";case"cod":return"Cash on Delivery";default:return s.charAt(0).toUpperCase()+s.slice(1)}},hs=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",fs=s=>{if(s.image)return s.image;if(s.product_id){return`https://sardarfashions.mycartly.in/uploads/products/${Y}/${s.product_id}_v1.png`}return null},ys=s=>{},ps=s=>{as(!0),es(s),ts(!0),setTimeout(()=>{as(!1)},300)},js=()=>{ts(!1),es(null),as(!1)};return q?t.jsx(i,{maxWidth:"lg",sx:{py:4},children:t.jsx(a,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(n,{size:60})})}):G?t.jsx(i,{maxWidth:"lg",sx:{py:4},children:t.jsx(o,{severity:"error",sx:{mb:3},children:G})}):t.jsxs(i,{maxWidth:"lg",sx:{py:{xs:1,md:4},px:{xs:.5,sm:2}},children:[t.jsxs(a,{sx:{mb:{xs:1.5,md:4}},children:[t.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"1.2rem",sm:"1.5rem",md:"2rem"},fontFamily:"Arial, sans-serif"},children:"My Orders"}),t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"Track your order history and status"})]}),0===J.length?t.jsxs(d,{sx:{p:{xs:2,md:6},textAlign:"center",borderRadius:3},children:[t.jsx(x,{sx:{fontSize:{xs:50,md:80},color:"text.secondary",mb:{xs:1.5,md:3}}}),t.jsx(l,{variant:"h5",color:"text.secondary",gutterBottom:!0,sx:{fontSize:{xs:"1rem",md:"1.5rem"},fontFamily:"Arial, sans-serif"},children:"No Orders Yet"}),t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"You haven't placed any orders yet. Start shopping to see your order history here."})]}):t.jsxs(t.Fragment,{children:[t.jsx(a,{sx:{display:{xs:"none",md:"block"}},children:t.jsx(c,{in:!0,timeout:500,children:t.jsx(d,{sx:{borderRadius:3,overflow:"hidden"},children:t.jsx(m,{sx:{maxHeight:600,overflowX:"auto"},children:t.jsxs(h,{stickyHeader:!0,children:[t.jsx(f,{children:t.jsxs(y,{sx:{bgcolor:"grey.50"},children:[t.jsx(p,{sx:{fontWeight:600},children:"Order ID"}),t.jsx(p,{sx:{fontWeight:600},children:"Date"}),t.jsx(p,{sx:{fontWeight:600},children:"Items"}),t.jsx(p,{sx:{fontWeight:600},children:"Total"}),t.jsx(p,{sx:{fontWeight:600},children:"Status"}),t.jsx(p,{sx:{fontWeight:600},children:"Payment"}),t.jsx(p,{sx:{fontWeight:600},children:"Actions"})]})}),t.jsx(j,{children:J.map(s=>t.jsxs(y,{sx:{"&:hover":{bgcolor:"grey.50"},cursor:"pointer"},onClick:()=>ps(s),children:[t.jsx(p,{children:t.jsxs(l,{variant:"body2",sx:{fontWeight:500,fontFamily:"Arial, sans-serif",fontSize:"0.85rem"},children:["#",s.order_id]})}),t.jsx(p,{children:t.jsx(l,{variant:"body2",color:"text.secondary",sx:{fontFamily:"Arial, sans-serif",fontSize:"0.8rem"},children:hs(s.created_at)})}),t.jsx(p,{children:t.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsxs(l,{variant:"body2",children:[s.items_count," item",1!==s.items_count?"s":""]}),s.items?.slice(0,2).map((s,e)=>t.jsx(u,{src:fs(s),sx:{width:24,height:24},onError:ys,children:t.jsx("img",{src:`https://sardarfashions.mycartly.in/uploads/products/${Y}/${s.product_id}_v1.png`,alt:"Product",style:{width:"100%",height:"100%",objectFit:"cover"}})},e)),s.items_count>2&&t.jsxs(l,{variant:"caption",color:"text.secondary",children:["+",s.items_count-2]})]})}),t.jsx(p,{children:t.jsxs(l,{variant:"body2",sx:{fontWeight:600,color:"#1976d2",fontFamily:"Arial, sans-serif",fontSize:"0.85rem"},children:["₹",s.total_amount?.toFixed(2)]})}),t.jsx(p,{children:t.jsx(g,{icon:xs(s.order_status),label:s.order_status,color:ds(s.order_status),size:"small",sx:{fontWeight:500}})}),t.jsxs(p,{children:[t.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[cs(s.payment_method),t.jsx(l,{variant:"body2",sx:{fontSize:"0.75rem"},children:ms(s.payment_method)})]}),t.jsx(g,{label:s.payment_status,color:"completed"===s.payment_status?"success":"warning",size:"small",variant:"outlined",sx:{mt:.5}})]}),t.jsx(p,{children:t.jsx(b,{title:"View Details",children:t.jsx(v,{variant:"outlined",size:"small",startIcon:t.jsx(_,{}),onClick:e=>{e.stopPropagation(),ps(s)},children:"View"})})})]},s.order_id))})]})})})})}),t.jsx(a,{sx:{display:{xs:"block",md:"none"}},children:t.jsx(S,{container:!0,spacing:1,children:J.map(s=>t.jsx(S,{item:!0,xs:12,children:t.jsx(z,{sx:{borderRadius:1.5,cursor:"pointer","&:hover":{boxShadow:2},transition:"all 0.2s ease",mx:.5},onClick:()=>ps(s),children:t.jsxs(F,{sx:{p:1.5},children:[t.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1.5},children:[t.jsxs(a,{sx:{flex:1},children:[t.jsxs(l,{variant:"h6",sx:{fontWeight:600,fontSize:"0.9rem",fontFamily:"Arial, sans-serif",color:"#333"},children:["#",s.order_id]}),t.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:.5,fontSize:"0.75rem",fontFamily:"Arial, sans-serif"},children:hs(s.created_at)})]}),t.jsxs(a,{sx:{textAlign:"right",ml:1},children:[t.jsxs(l,{variant:"h6",sx:{fontWeight:600,fontSize:"0.9rem",fontFamily:"Arial, sans-serif",color:"#1976d2"},children:["₹",s.total_amount?.toFixed(2)]}),t.jsx(g,{icon:xs(s.order_status),label:s.order_status,color:ds(s.order_status),size:"small",sx:{mt:.5,fontSize:"0.65rem",fontFamily:"Arial, sans-serif",height:"20px"}})]})]}),t.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5,mb:1.5,flexWrap:"wrap"},children:[t.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[cs(s.payment_method),t.jsx(l,{variant:"body2",sx:{fontSize:"0.7rem",fontFamily:"Arial, sans-serif",color:"#666"},children:ms(s.payment_method)})]}),t.jsx(g,{label:s.payment_status,color:"completed"===s.payment_status?"success":"warning",size:"small",variant:"outlined",sx:{fontSize:"0.65rem",fontFamily:"Arial, sans-serif",height:"18px"}})]}),t.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[t.jsxs(l,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.7rem",fontFamily:"Arial, sans-serif"},children:[s.items_count," item",1!==s.items_count?"s":""]}),t.jsxs(a,{sx:{display:"flex",gap:.3,flexWrap:"wrap"},children:[s.items?.slice(0,3).map((s,e)=>t.jsx(u,{src:fs(s),sx:{width:24,height:24,border:"1px solid #e0e0e0"},onError:ys,children:t.jsx("img",{src:`https://sardarfashions.mycartly.in/uploads/products/${Y}/${s.product_id}_v1.png`,alt:"Product",style:{width:"100%",height:"100%",objectFit:"cover"}})},e)),s.items_count>3&&t.jsxs(l,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.65rem",fontFamily:"Arial, sans-serif"},children:["+",s.items_count-3]})]})]})]})})},s.order_id))})})]}),t.jsxs(A,{open:rs,onClose:js,maxWidth:"md",fullWidth:!0,fullScreen:os,sx:{"& .MuiDialog-paper":{margin:{xs:0,sm:2},width:{xs:"100%",sm:"auto"},maxWidth:{xs:"100%",sm:"600px"},maxHeight:{xs:"100%",sm:"90vh"}}},children:[t.jsx(w,{sx:{pb:1,px:{xs:2,md:3}},children:t.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(l,{variant:"h6",sx:{fontWeight:600,fontSize:{xs:"0.9rem",md:"1.1rem"},fontFamily:"Arial, sans-serif"},children:["Order #",ss?.order_id," Details"]}),t.jsx(W,{onClick:js,size:"small",children:t.jsx(C,{})})]})}),t.jsx(I,{dividers:!0,sx:{p:0,overflowX:"hidden"},children:is?t.jsx(a,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:t.jsx(n,{})}):ss&&t.jsxs(a,{sx:{p:{xs:1,md:2}},children:[t.jsxs(d,{sx:{p:{xs:2,md:3},mb:3,bgcolor:"grey.50"},children:[t.jsxs(a,{sx:{mb:{xs:2,md:3},textAlign:"center"},children:[t.jsxs(l,{variant:"h4",sx:{fontWeight:700,color:"#1976d2",mb:1,fontSize:{xs:"1.2rem",md:"1.5rem"},fontFamily:"Arial, sans-serif"},children:["Order #",ss.order_id]}),t.jsxs(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:["Placed on ",hs(ss.created_at)]})]}),t.jsxs(S,{container:!0,spacing:os?1.5:4,children:[t.jsxs(S,{item:!0,xs:12,md:6,children:[t.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"0.9rem",md:"1.1rem"},fontFamily:"Arial, sans-serif"},children:"Order Information"}),t.jsxs(D,{spacing:os?1.5:2,children:[t.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:{xs:.5,sm:0}},children:[t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"Order ID:"}),t.jsxs(l,{variant:"body1",sx:{fontWeight:600,fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif",wordBreak:"break-all"},children:["#",ss.order_id]})]}),t.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:{xs:.5,sm:0}},children:[t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"Order Date:"}),t.jsx(l,{variant:"body1",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:hs(ss.created_at)})]}),t.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:{xs:.5,sm:0}},children:[t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"Status:"}),t.jsx(g,{icon:xs(ss.order_status),label:ss.order_status,color:ds(ss.order_status),size:"medium",sx:{fontSize:{xs:"0.7rem",md:"0.8rem"},fontFamily:"Arial, sans-serif"}})]})]})]}),t.jsxs(S,{item:!0,xs:12,md:6,children:[t.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"0.9rem",md:"1.1rem"},fontFamily:"Arial, sans-serif"},children:"Payment Information"}),t.jsxs(D,{spacing:os?1.5:2,children:[t.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:{xs:.5,sm:0}},children:[t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"Total Amount:"}),t.jsxs(l,{variant:"h5",sx:{fontWeight:700,color:"#1976d2",fontSize:{xs:"1rem",md:"1.5rem"},fontFamily:"Arial, sans-serif"},children:["₹",ss.total_amount?.toFixed(2)]})]}),t.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:{xs:.5,sm:0}},children:[t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"Payment Method:"}),t.jsx(l,{variant:"body1",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:ms(ss.payment_method)})]}),t.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:{xs:.5,sm:0}},children:[t.jsx(l,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:"Payment Status:"}),t.jsx(g,{label:ss.payment_status,color:"completed"===ss.payment_status?"success":"warning",size:"medium",sx:{fontSize:{xs:"0.7rem",md:"0.8rem"},fontFamily:"Arial, sans-serif"}})]})]})]})]})]}),t.jsxs(d,{sx:{p:{xs:2,md:3},mb:3},children:[t.jsx(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:{xs:1.5,md:2},fontSize:{xs:"0.9rem",md:"1.1rem"},fontFamily:"Arial, sans-serif"},children:"Shipping Address"}),t.jsx(l,{variant:"body1",sx:{lineHeight:1.6,fontSize:{xs:"0.75rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:(s=>{if(!s||"string"==typeof s)return s||"Address not available";const e=[];return s.full_name&&e.push(s.full_name),s.address_line1&&e.push(s.address_line1),s.address_line2&&e.push(s.address_line2),s.city&&e.push(s.city),s.state&&e.push(s.state),s.postal_code&&e.push(s.postal_code),s.country&&e.push(s.country),e.length>0?e.join(", "):"Address not available"})(ss.shipping_address)})]}),t.jsxs(d,{sx:{p:{xs:2,md:3}},children:[t.jsxs(l,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"0.9rem",md:"1.1rem"},fontFamily:"Arial, sans-serif"},children:["Order Items (",ss.items?.length||0,")"]}),t.jsx(k,{children:ss.items?.map((s,e)=>t.jsxs(O.Fragment,{children:[e>0&&t.jsx(P,{sx:{my:{xs:1.5,md:2}}}),t.jsxs($,{sx:{px:0,py:{xs:1.5,md:3},flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"}},children:[t.jsx(B,{sx:{mr:{xs:0,sm:2},mb:{xs:1,sm:0},alignSelf:{xs:"flex-start",sm:"center"}},children:t.jsx(u,{src:fs(s),sx:{width:{xs:50,md:80},height:{xs:50,md:80},borderRadius:2,border:"1px solid #e0e0e0"},variant:"rounded",onError:ys,children:t.jsx("img",{src:`https://sardarfashions.mycartly.in/uploads/products/${Y}/${s.product_id}_v1.png`,alt:"Product",style:{width:"100%",height:"100%",objectFit:"cover"}})})}),t.jsx(H,{primary:t.jsxs(a,{sx:{mb:1,width:"100%"},children:[t.jsx(l,{variant:"h6",sx:{fontWeight:600,mb:.5,fontSize:{xs:"0.8rem",md:"1.1rem"},fontFamily:"Arial, sans-serif",wordBreak:"break-word"},children:s.name||s.product_name}),t.jsxs(l,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",md:"0.8rem"},fontFamily:"Arial, sans-serif"},children:["Product ID: ",s.product_id]})]}),secondary:t.jsxs(a,{sx:{mt:1,width:"100%"},children:[t.jsxs(l,{variant:"body1",sx:{fontWeight:500,mb:1,fontSize:{xs:"0.7rem",md:"1rem"},fontFamily:"Arial, sans-serif"},children:["Quantity: ",s.quantity," × ₹",s.price?.toFixed(2)||s.unit_price?.toFixed(2)]}),s.selected_variants&&Object.keys(s.selected_variants).length>0&&t.jsxs(a,{sx:{mb:1},children:[t.jsx(l,{variant:"body2",color:"text.secondary",sx:{fontWeight:500,fontSize:{xs:"0.65rem",md:"0.8rem"},fontFamily:"Arial, sans-serif"},children:"Selected Variants:"}),t.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:{xs:.3,md:1},mt:.5},children:Object.entries(s.selected_variants).map(([s,e])=>t.jsx(g,{label:`${s}: ${e}`,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.6rem",md:"0.75rem"},fontFamily:"Arial, sans-serif"}},s))})]})]})}),t.jsxs(a,{sx:{textAlign:{xs:"left",sm:"right"},ml:{xs:0,sm:2},mt:{xs:1,sm:0},width:{xs:"100%",sm:"auto"}},children:[t.jsxs(l,{variant:"h5",sx:{fontWeight:600,color:"#1976d2",fontSize:{xs:"0.8rem",md:"1.5rem"},fontFamily:"Arial, sans-serif"},children:["₹",s.subtotal?.toFixed(2)||s.total_price?.toFixed(2)]}),t.jsx(l,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",md:"0.8rem"},fontFamily:"Arial, sans-serif"},children:"Total"})]})]})]},e))})]})]})}),t.jsx(T,{sx:{p:3},children:t.jsx(v,{onClick:js,variant:"contained",children:"Close"})})]})]})};export{J as default};
