import{r as e,j as t,aN as s,B as r,C as a,A as n,T as i,ay as c,J as d,N as l,aE as o,aF as x,aH as m,aX as h,aO as j,aP as y,aQ as u,aR as p,aS as g,aT as b,ak as v,m as f,aZ as _,aY as w,K as I,aW as C,a_ as B}from"./mui-CLbw_gaj.js";import{a as N}from"./index-Dl6Rh4QD.js";import"./vendor-HnKmhvXM.js";import"./utils-CeR3a_hx.js";import"./router-BiFerjYI.js";const P=()=>{const[P,S]=e.useState([]),[A,D]=e.useState(!0),[F,L]=e.useState(null);e.useEffect(()=>{T()},[]);const T=async()=>{try{D(!0),L(null);const e=await N.get("/customer/payments");e.data.success?S(e.data.payments):L("Failed to fetch payments")}catch(e){L(e.response?.data?.error||"Failed to fetch payments")}finally{D(!1)}},W=e=>{switch(e?.toLowerCase()){case"completed":case"success":return"success";case"pending":return"warning";case"failed":case"cancelled":return"error";default:return"default"}},z=e=>{switch(e?.toLowerCase()){case"completed":case"success":return t.jsx(m,{});case"pending":return t.jsx(h,{});case"failed":return t.jsx(B,{});case"cancelled":return t.jsx(C,{});default:return t.jsx(d,{})}},H=e=>{switch(e?.toLowerCase()){case"razorpay":default:return t.jsx(d,{});case"card":return t.jsx(I,{});case"bank_transfer":return t.jsx(w,{});case"cod":return t.jsx(_,{})}},O=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",R=(e,t="INR")=>e?new Intl.NumberFormat("en-IN",{style:"currency",currency:t||"INR"}).format(e):"₹0.00";return A?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(r,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:t.jsx(a,{})})}):F?t.jsx(s,{maxWidth:"lg",sx:{py:4},children:t.jsx(n,{severity:"error",sx:{mb:3},children:F})}):t.jsxs(s,{maxWidth:"lg",sx:{py:4},children:[t.jsxs(r,{sx:{mb:4},children:[t.jsx(i,{variant:"h4",component:"h1",gutterBottom:!0,children:"Payment History"}),t.jsx(i,{variant:"body1",color:"text.secondary",children:"View all your payment transactions and their status"})]}),0===P.length?t.jsxs(c,{sx:{p:4,textAlign:"center"},children:[t.jsx(d,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(i,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Payment History"}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"You haven't made any payments yet. Your payment history will appear here after you place orders."})]}):t.jsxs(l,{container:!0,spacing:3,children:[t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(m,{color:"success",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Successful"})]}),t.jsx(i,{variant:"h4",color:"success.main",children:P.filter(e=>"completed"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Completed payments"})]})})}),t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(h,{color:"warning",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Pending"})]}),t.jsx(i,{variant:"h4",color:"warning.main",children:P.filter(e=>"pending"===e.payment_status?.toLowerCase()).length}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Pending payments"})]})})}),t.jsx(l,{item:!0,xs:12,md:4,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(d,{color:"primary",sx:{mr:1}}),t.jsx(i,{variant:"h6",children:"Total"})]}),t.jsx(i,{variant:"h4",color:"primary.main",children:R(P.reduce((e,t)=>e+(t.amount||0),0))}),t.jsx(i,{variant:"body2",color:"text.secondary",children:"Total amount paid"})]})})}),t.jsx(l,{item:!0,xs:12,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsx(i,{variant:"h6",gutterBottom:!0,children:"Recent Payments"}),t.jsx(j,{children:t.jsxs(y,{children:[t.jsx(u,{children:t.jsxs(p,{children:[t.jsx(g,{children:"Payment ID"}),t.jsx(g,{children:"Order ID"}),t.jsx(g,{children:"Amount"}),t.jsx(g,{children:"Method"}),t.jsx(g,{children:"Status"}),t.jsx(g,{children:"Date"})]})}),t.jsx(b,{children:P.map(e=>t.jsxs(p,{children:[t.jsx(g,{children:t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace"},children:e.payment_id})}),t.jsx(g,{children:t.jsxs(i,{variant:"body2",color:"primary",children:["#",e.order_id]})}),t.jsx(g,{children:t.jsx(i,{variant:"body2",sx:{fontWeight:600},children:R(e.amount,e.currency)})}),t.jsx(g,{children:t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[H(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]})}),t.jsx(g,{children:t.jsx(v,{icon:z(e.payment_status),label:e.payment_status,color:W(e.payment_status),size:"small"})}),t.jsx(g,{children:t.jsx(i,{variant:"body2",children:O(e.created_at)})})]},e.payment_id))})]})})]})})}),t.jsx(l,{item:!0,xs:12,children:t.jsx(i,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Payment Details"})}),P.map(e=>t.jsx(l,{item:!0,xs:12,children:t.jsx(o,{children:t.jsxs(x,{children:[t.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(r,{children:[t.jsxs(i,{variant:"h6",component:"h2",gutterBottom:!0,children:["Payment #",e.payment_id]}),t.jsxs(i,{variant:"body2",color:"text.secondary",children:["Order #",e.order_id," • ",O(e.created_at)]})]}),t.jsxs(r,{sx:{textAlign:"right"},children:[t.jsx(i,{variant:"h6",color:"primary",gutterBottom:!0,children:R(e.amount,e.currency)}),t.jsx(v,{icon:z(e.payment_status),label:e.payment_status,color:W(e.payment_status),size:"small"})]})]}),t.jsx(f,{sx:{my:2}}),t.jsxs(l,{container:!0,spacing:2,children:[t.jsxs(l,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Payment Method"}),t.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[H(e.payment_method),t.jsx(i,{variant:"body2",children:e.payment_method?.toUpperCase()||"N/A"})]}),e.transaction_id&&t.jsxs(t.Fragment,{children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Transaction ID"}),t.jsx(i,{variant:"body2",sx:{fontFamily:"monospace",mb:2},children:e.transaction_id})]})]}),t.jsxs(l,{item:!0,xs:12,md:6,children:[t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Customer Details"}),t.jsx(i,{variant:"body2",sx:{mb:1},children:e.customer_name||"N/A"}),t.jsx(i,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Order Total"}),t.jsx(i,{variant:"body2",children:R(e.order_total,e.currency)})]})]}),e.updated_at&&e.updated_at!==e.created_at&&t.jsx(r,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:t.jsxs(i,{variant:"caption",color:"text.secondary",children:["Last updated: ",O(e.updated_at)]})})]})})},e.payment_id))]})]})};export{P as default};
