import{u as e,a as s,r as o,a6 as r,j as t,B as i,T as n,h as a,af as l,ag as c,I as d,a0 as x,a1 as h,W as g,ah as f,ai as m,aj as p,ak as b,D as u,b as y,c as j,f as v,g as w,al as S,am as k,an as C,i as F,a7 as W,A as _}from"./mui-vugdBkEW.js";import{u as z,a as I,L as R}from"./index-BqFA0KlC.js";import{b as E,u as D}from"./router-BDbEWt86.js";import"./vendor-HnKmhvXM.js";import"./utils-BuJOX08E.js";const M=()=>{const{productId:M}=E(),N=D(),H=e(),T=s(H.breakpoints.down("md")),{addToCart:A,isLoggedIn:B,login:O}=z(),[L,Y]=o.useState(null),[P,$]=o.useState({}),[U,X]=o.useState(!1),[G,K]=o.useState(!0),[Z,q]=o.useState(!1),[Q,V]=o.useState({open:!1,message:"",severity:"success"}),[J,ee]=o.useState(!1),[se,oe]=o.useState(!1),[re,te]=o.useState(null),[ie,ne]=o.useState([]),[ae,le]=o.useState(!1),[ce,de]=o.useState(!1),[xe,he]=o.useState({rating:0,review_text:"",customer_name:"",customer_email:""}),[ge,fe]=o.useState(!1),[me,pe]=o.useState({open:!1,image:"",index:0}),[be,ue]=o.useState(1),[ye,je]=o.useState({x:0,y:0}),[ve,we]=o.useState(!1),[Se,ke]=o.useState({x:0,y:0});o.useEffect(()=>{M&&(Ce(),Ae(),Be())},[M]);const Ce=async()=>{try{K(!0);const e=await I.get(`/product/${M}`);if(e.data?.success){const s=e.data.product,o={...s};Y(o);const r={};s.variants&&Array.isArray(s.variants)&&s.variants.forEach(e=>{e.values&&e.values.length>0&&(r[e.name]=e.values[0])}),$(r)}}catch(e){Y(null)}finally{K(!1)}},[Fe,We]=o.useState(""),[_e,ze]=o.useState(0),[Ie,Re]=o.useState([]),Ee=r.useMemo(()=>L&&L.images&&Array.isArray(L.images)&&L.images.length>0?L.images.filter(e=>e):[],[L]);o.useEffect(()=>{Ee.length>0?(Re(Ee),We(Ee[0]),ze(0)):(Re([]),We(""))},[Ee]),o.useEffect(()=>{},[Fe]);const De=(e,s)=>{pe({open:!0,image:e,index:s}),ze(s),We(e),ue(1),je({x:0,y:0})},Me=()=>{pe({open:!1,image:"",index:0}),ue(1),je({x:0,y:0})},Ne=()=>{ue(1),je({x:0,y:0})},He=()=>{we(!1)},Te=async()=>{if(L){ee(!0);try{await A(L,1,P),V({open:!0,message:"Added to cart successfully!",severity:"success"})}catch(e){"OUT_OF_STOCK"===e.message?V({open:!0,message:"Sorry, this product is currently out of stock",severity:"warning"}):V({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{ee(!1)}}},Ae=async()=>{try{const e=await I.get(`/product/${M}/reviews/summary`);e.data?.success&&te(e.data.summary)}catch(e){}},Be=async(e=1,s="newest")=>{try{le(!0);const o=await I.get(`/product/${M}/reviews`,{params:{page:e,sort_by:s}});o.data?.success&&ne(o.data.reviews)}catch(o){}finally{le(!1)}},Oe=(e,s)=>{he(o=>({...o,[e]:s}))};if(G)return t.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:t.jsx(n,{children:"Loading product details..."})});if(!L)return t.jsxs(i,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"60vh",textAlign:"center",px:3},children:[t.jsx(n,{variant:"h4",sx:{fontWeight:600,color:"#333",mb:2,fontFamily:'"Montserrat", sans-serif'},children:"Product Not Found"}),t.jsx(n,{variant:"body1",sx:{color:"#666",mb:4,maxWidth:500,fontFamily:'"Nunito Sans", sans-serif',lineHeight:1.6},children:"Sorry, the product you're looking for doesn't exist or may have been removed."}),t.jsx(a,{variant:"contained",onClick:()=>N("/"),sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:600,px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)"}},children:"Continue Shopping"})]});const Le=parseFloat(L.original_price||L.base_price)||0,Ye=parseFloat(L.price)||0,Pe=Ye,$e=Le>0&&Ye<Le?Math.round((Le-Ye)/Le*100):0,Ue=(e=>{if(!e)return{main:"",sections:{},isHtml:!1};if(/<[^>]*>/g.test(e))return{main:e,sections:{},isHtml:!0};const s={},o=e.split("\n").filter(e=>e.trim());let r="main",t=[];for(const i of o)if(i.includes(":")){const[e,...o]=i.split(":"),n=e.trim().toUpperCase();n.includes("FABRIC")||n.includes("WORK")||n.includes("SIZE")||n.includes("WEIGHT")||n.includes("CARE")||n.includes("STITCH")?(r=n,s[r]=o.join(":").trim()):t.push(i)}else"main"===r?t.push(i):s[r]=(s[r]||"")+"\n"+i;return{main:t.join("\n"),sections:s,isHtml:!1}})(L.description);return t.jsxs(i,{sx:{width:"100%",maxWidth:1400,mx:"auto",px:{xs:2,sm:3,md:4},py:{xs:2,sm:3,md:4},bgcolor:"#fafafa",overflow:"hidden",boxSizing:"border-box"},children:[t.jsxs(l,{sx:{mb:{xs:2,md:4},fontSize:{xs:"0.75rem",sm:"0.875rem"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},children:[t.jsx(c,{color:"inherit",href:"#",onClick:e=>{e.preventDefault(),N("/")},sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Home"}),t.jsx(c,{color:"inherit",href:"#",onClick:e=>{e.preventDefault(),N("/")},sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"All Brands"}),t.jsx(n,{color:"text.primary",children:L.name})]}),t.jsxs(i,{sx:{display:"flex",flexDirection:T?"column":"row",gap:{xs:2,sm:3,md:4},alignItems:"flex-start",mb:{xs:2,md:4},width:"100%",boxSizing:"border-box"},children:[t.jsx(i,{sx:{flex:{md:"0 0 50%"},width:"100%",maxWidth:{md:"50%"},display:"flex",gap:{xs:1.5,sm:2,md:3},boxSizing:"border-box"},children:t.jsxs(i,{sx:{display:"flex",flexDirection:T?"column-reverse":"row",gap:{xs:1.5,sm:2,md:3},width:"100%",boxSizing:"border-box"},children:[t.jsx(i,{sx:{display:"flex",flexDirection:T?"row":"column",gap:{xs:1,sm:1.5},width:T?"100%":{xs:"60px",sm:"80px",md:"100px"},flexShrink:0,overflowX:T?"auto":"visible",pb:T?1:0,"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(102, 126, 234, 0.3)",borderRadius:"4px"}},children:Ie.map((e,s)=>t.jsx(i,{sx:{width:T?"60px":"100%",height:{xs:"60px",sm:"80px",md:"100px"},minWidth:T?"60px":"auto",minHeight:{xs:"60px",sm:"80px",md:"100px"},maxHeight:{xs:"60px",sm:"80px",md:"100px"},border:_e===s?"3px solid #667eea":"2px solid #e5e7eb",borderRadius:3,cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:_e===s?"0 4px 12px rgba(102, 126, 234, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",backgroundColor:"#f8f9fa",display:"flex",alignItems:"center",justifyContent:"center","&:hover":{border:"3px solid #667eea",transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.4)"}},onClick:()=>((e,s)=>{We(e),ze(s)})(e,s),children:t.jsx(i,{component:"img",src:e,alt:L?.name||"Product",sx:{width:"100%",height:"100%",objectFit:"contain",display:"block",pointerEvents:"none"},onError:e=>{e.target.style.display="none"}})},s))}),t.jsxs(i,{sx:{position:"relative",flex:1,width:"100%",maxWidth:"100%",height:"auto",maxHeight:{xs:"500px",sm:"600px",md:"700px"},aspectRatio:T?"unset":"4/5",backgroundColor:"#ffffff",borderRadius:4,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #f3f4f6",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",boxSizing:"border-box"},children:[t.jsx("img",{src:Fe,alt:L?.name||"Product",onClick:()=>De(Fe,_e),style:{width:"100%",height:T?"auto":"100%",maxHeight:T?"500px":"100%",objectFit:"contain",maxWidth:"100%",maxHeight:"100%",transition:"all 0.3s ease",display:"block",cursor:"zoom-in"},onError:e=>{e.target.style.display="none"},onLoad:e=>{}},Fe),Ie.length>1&&t.jsxs(t.Fragment,{children:[t.jsx(d,{onClick:()=>{const e=0===_e?Ie.length-1:_e-1;ze(e),We(Ie[e])},sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#374151",width:48,height:48,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.2)"}},children:t.jsx(x,{sx:{fontSize:24}})}),t.jsx(d,{onClick:()=>{const e=(_e+1)%Ie.length;ze(e),We(Ie[e])},sx:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#374151",width:48,height:48,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.2)"}},children:t.jsx(h,{sx:{fontSize:24}})}),t.jsxs(i,{sx:{position:"absolute",bottom:16,right:16,backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[_e+1," / ",Ie.length]})]}),$e>0&&t.jsxs(i,{sx:{position:"absolute",top:16,left:16,backgroundColor:"#dc2626",color:"white",px:2,py:1,borderRadius:3,fontSize:"0.8rem",fontWeight:700,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 4px 16px rgba(220, 38, 38, 0.3)",textTransform:"uppercase",letterSpacing:"0.5px"},children:["-",$e,"% OFF"]})]})]})}),t.jsxs(i,{sx:{flex:{md:"0 0 50%"},width:"100%",maxWidth:{md:"50%"},display:"flex",flexDirection:"column",gap:{xs:2,sm:2.5,md:3},boxSizing:"border-box",overflow:"hidden"},children:[t.jsxs(i,{sx:{position:"relative"},children:[t.jsx(n,{variant:"body2",sx:{color:"#E91E63",textTransform:"uppercase",fontWeight:600,mb:1,fontFamily:'"Montserrat", sans-serif'},children:L.brand||"SARDAR FASHIONS"}),t.jsx(n,{variant:T?"h5":"h4",sx:{fontWeight:500,color:"#222",lineHeight:1.3,mb:0,pr:6,fontFamily:'"Montserrat", sans-serif'},children:L.name}),t.jsx(d,{onClick:()=>{X(!U)},sx:{position:"absolute",top:0,right:0,color:U?"#e74c3c":"#666"},children:U?t.jsx(g,{}):t.jsx(f,{})})]}),re&&t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,mb:0},children:[t.jsx(i,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(e=>t.jsx(i,{component:"span",sx:{color:e<=re.average_rating?"#FFD700":"#ddd",fontSize:"1.2rem"},children:"★"},e))}),t.jsxs(n,{sx:{fontSize:"0.9rem",color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:["(",re.total_reviews," reviews)"]})]}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:.5,mb:0,p:2,bgcolor:"#f8f9fa",borderRadius:2,border:"1px solid #e9ecef"},children:[$e>0?t.jsxs(t.Fragment,{children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsxs(n,{variant:T?"h4":"h3",sx:{fontWeight:800,color:"#667eea",fontFamily:'"Montserrat", sans-serif'},children:["₹",Pe.toLocaleString("en-IN")]}),t.jsx(m,{label:`-${$e}% OFF`,sx:{bgcolor:"#dc2626",color:"white",fontWeight:700,fontSize:"0.8rem",height:28}})]}),t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsxs(n,{variant:"h6",sx:{color:"#6b7280",textDecoration:"line-through",fontFamily:'"Nunito Sans", sans-serif',fontWeight:500},children:["MRP: ₹",Le.toLocaleString()]}),t.jsxs(n,{variant:"body2",sx:{color:"#059669",fontWeight:600,fontFamily:'"Nunito Sans", sans-serif'},children:["Save ₹",(Le-Pe).toLocaleString()]})]})]}):t.jsxs(n,{variant:T?"h4":"h3",sx:{fontWeight:800,color:"#667eea",fontFamily:'"Montserrat", sans-serif'},children:["₹",Pe.toLocaleString("en-IN")]}),t.jsx(n,{variant:"body2",sx:{color:"#6b7280",fontFamily:'"Nunito Sans", sans-serif',fontSize:"0.8rem",fontStyle:"italic",mt:.5},children:"All taxes included. No extra GST. Shipping calculated at checkout."})]}),t.jsxs(i,{sx:{display:"flex",gap:2,mb:0,width:"100%"},children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:L.in_stock?"#f0fdf4":"#fef2f2",borderRadius:2,border:"1px solid "+(L.in_stock?"#bbf7d0":"#fecaca"),flex:1},children:[t.jsx(i,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:L.in_stock?"#16a34a":"#dc2626",boxShadow:"0 0 0 2px "+(L.in_stock?"#bbf7d0":"#fecaca")}}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[t.jsx(n,{variant:"body1",sx:{color:L.in_stock?"#166534":"#991b1b",fontWeight:600,fontFamily:'"Montserrat", sans-serif'},children:L.in_stock?"In Stock":"Out of Stock"}),t.jsx(n,{variant:"body2",sx:{color:L.in_stock?"#15803d":"#b91c1c",fontFamily:'"Nunito Sans", sans-serif'},children:L.in_stock?`${L.stock} units available`:"Currently unavailable"})]})]}),t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:"#f0f8ff",borderRadius:2,border:"1px solid #bfdbfe",flex:1},children:[t.jsx(i,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"#3b82f6",boxShadow:"0 0 0 2px #bfdbfe"}}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[t.jsx(n,{variant:"body1",sx:{color:"#1e40af",fontWeight:600,fontFamily:'"Montserrat", sans-serif'},children:"Fast Delivery"}),t.jsx(n,{variant:"body2",sx:{color:"#1d4ed8",fontFamily:'"Nunito Sans", sans-serif'},children:"Within 3 to 5 days"})]})]})]}),L.variants&&L.variants.length>0&&t.jsx(i,{sx:{mb:3},children:L.variants.map((e,s)=>t.jsxs(i,{sx:{mb:2},children:[t.jsxs(n,{variant:"subtitle1",sx:{fontWeight:600,mb:1.5,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:["Select ",e.name]}),t.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.values?.map((s,o)=>t.jsx(a,{variant:P[e.name]===s?"contained":"outlined",onClick:()=>{return o=e.name,r=s,void $(e=>({...e,[o]:r}));var o,r},sx:{minWidth:80,py:1,px:2,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.9rem",...P[e.name]===s&&{bgcolor:"#E91E63",color:"white","&:hover":{bgcolor:"#C2185B"}},...P[e.name]!==s&&{borderColor:"#e0e0e0",color:"#333","&:hover":{borderColor:"#E91E63",color:"#E91E63"}}},children:s},o))})]},s))}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.jsx(a,{variant:"contained",size:"large",fullWidth:!0,disabled:!L.in_stock||J,onClick:Te,startIcon:t.jsx(p,{}),sx:{py:2.5,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:700,textTransform:"none",fontSize:"1.1rem",borderRadius:3,boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)",boxShadow:"0 12px 35px rgba(102, 126, 234, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%)",color:"#666",boxShadow:"none",transform:"none"}},children:J?"Adding to Cart...":L.in_stock?"Add to Cart":"Out of Stock"}),t.jsx(a,{variant:"contained",size:"large",fullWidth:!0,disabled:!L.in_stock||se,onClick:async()=>{if(L)if(B){oe(!0);try{await A(L,1,P),setTimeout(()=>{N("/checkout")},100)}catch(e){"LOGIN_REQUIRED"===e.message?q(!0):"OUT_OF_STOCK"===e.message?V({open:!0,message:"Sorry, this product is currently out of stock",severity:"warning"}):V({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{oe(!1)}}else q(!0)},sx:{py:2.5,background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",fontWeight:700,textTransform:"none",fontSize:"1.1rem",borderRadius:3,boxShadow:"0 8px 25px rgba(233, 30, 99, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)",boxShadow:"0 12px 35px rgba(233, 30, 99, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%)",color:"#666",boxShadow:"none",transform:"none"}},children:se?"Processing...":L.in_stock?"Buy Now":"Out of Stock"}),t.jsx(a,{variant:"outlined",size:"small",onClick:()=>{navigator.share?navigator.share({title:L.name,text:L.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),V({open:!0,message:"Link copied to clipboard!",severity:"success"}))},startIcon:t.jsx(b,{}),sx:{py:1,px:2,alignSelf:"flex-start",borderColor:"#667eea",color:"#667eea",fontWeight:500,textTransform:"none",fontSize:"0.8rem",borderRadius:2,borderWidth:1,minWidth:"120px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"#5a6fd8",backgroundColor:"rgba(102, 126, 234, 0.05)",transform:"translateY(-1px)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.2)"}},children:"Share"})]}),L.description&&t.jsxs(i,{sx:{mt:4,pt:4,borderTop:"1px solid #e0e0e0"},children:[t.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:"Product Description"}),Ue.main&&t.jsx(i,{sx:{color:"#555",lineHeight:1.7,mb:3,fontFamily:'"Nunito Sans", sans-serif',fontSize:"1rem","& p":{marginBottom:"1rem","&:last-child":{marginBottom:0}},"& ul":{paddingLeft:"1.5rem",marginBottom:"1rem"},"& li":{marginBottom:"0.5rem","& strong":{fontWeight:600,color:"#333"}},"& strong":{fontWeight:600,color:"#333"}},children:Ue.isHtml?t.jsx("div",{dangerouslySetInnerHTML:{__html:Ue.main}}):t.jsx(n,{variant:"body1",children:Ue.main})}),!Ue.isHtml&&Object.keys(Ue.sections).length>0&&t.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.entries(Ue.sections).map(([e,s])=>t.jsxs(i,{sx:{p:2,bgcolor:"#f8f9fa",borderRadius:2,border:"1px solid #e9ecef"},children:[t.jsx(n,{variant:"subtitle2",sx:{fontWeight:700,color:"#333",mb:1,fontFamily:'"Montserrat", sans-serif',textTransform:"uppercase",letterSpacing:"0.5px"},children:e.replace(/_/g," ")}),t.jsx(n,{variant:"body2",sx:{color:"#666",lineHeight:1.6,fontFamily:'"Nunito Sans", sans-serif'},children:s})]},e))})]})]})]}),t.jsxs(i,{sx:{mt:2},children:[t.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:1,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:"Customer Reviews"}),re&&t.jsxs(i,{sx:{mb:3,p:2,bgcolor:"#f8f9fa",borderRadius:2},children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,mb:1.5},children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(n,{variant:"h4",sx:{fontWeight:700,color:"#E91E63",fontFamily:'"Montserrat", sans-serif'},children:re.average_rating}),t.jsx(i,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(e=>t.jsx(i,{component:"span",sx:{color:e<=re.average_rating?"#FFD700":"#ddd",fontSize:"1.5rem"},children:"★"},e))})]}),t.jsxs(n,{variant:"body1",sx:{color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:["Based on ",re.total_reviews," reviews"]}),t.jsx(a,{variant:"contained",onClick:()=>de(!0),sx:{bgcolor:"#E91E63",color:"white","&:hover":{bgcolor:"#C2185B"}},children:"Write a Review"})]}),re.total_reviews>0&&t.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:1},children:[5,4,3,2,1].map(e=>t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsxs(n,{variant:"body2",sx:{minWidth:20,fontFamily:'"Nunito Sans", sans-serif'},children:[e,"★"]}),t.jsx(i,{sx:{flex:1,bgcolor:"#ddd",height:8,borderRadius:4,overflow:"hidden"},children:t.jsx(i,{sx:{width:`${re.rating_percentages[e]}%`,height:"100%",bgcolor:"#E91E63",borderRadius:4}})}),t.jsx(n,{variant:"body2",sx:{minWidth:40,textAlign:"right",fontFamily:'"Nunito Sans", sans-serif'},children:re.rating_distribution[e]})]},e))})]}),t.jsx(i,{sx:{mb:4},children:ae?t.jsx(i,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(n,{sx:{fontFamily:'"Nunito Sans", sans-serif'},children:"Loading reviews..."})}):ie.length>0?t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:3},children:[ie.map(e=>t.jsxs(i,{sx:{p:3,border:"1px solid #e0e0e0",borderRadius:2},children:[t.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(i,{children:[t.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,fontFamily:'"Montserrat", sans-serif'},children:e.customer_name}),t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(i,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(s=>t.jsx(i,{component:"span",sx:{color:s<=e.rating?"#FFD700":"#ddd",fontSize:"0.9rem"},children:"★"},s))}),t.jsx(n,{variant:"body2",sx:{color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:new Date(e.created_at).toLocaleDateString()})]})]}),e.is_verified_purchase&&t.jsx(m,{label:"Verified Purchase",size:"small",sx:{bgcolor:"#4caf50",color:"white",fontSize:"0.7rem"}})]}),t.jsx(n,{variant:"body1",sx:{mb:2,lineHeight:1.6,fontFamily:'"Nunito Sans", sans-serif'},children:e.review_text}),e.admin_reply&&t.jsxs(i,{sx:{mt:2,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:[t.jsx(n,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"#E91E63"},children:"Store Response"}),t.jsx(n,{variant:"body2",children:e.admin_reply})]})]},e.review_id)),t.jsx(i,{sx:{textAlign:"center",mt:3,pt:3,borderTop:"1px solid #e0e0e0"},children:t.jsx(a,{variant:"contained",onClick:()=>de(!0),sx:{bgcolor:"#E91E63",color:"white",px:4,py:1.5,"&:hover":{bgcolor:"#C2185B"}},children:"Write a Review"})})]}):t.jsxs(i,{sx:{textAlign:"center",py:4},children:[t.jsx(n,{variant:"body1",sx:{color:"#666",mb:2,fontFamily:'"Nunito Sans", sans-serif'},children:"No reviews yet. Be the first to review this product!"}),t.jsx(a,{variant:"contained",onClick:()=>de(!0),sx:{bgcolor:"white",color:"#E91E63","&:hover":{bgcolor:"#f5f5f5",color:"#C2185B"}},children:"Write the First Review"})]})})]}),t.jsxs(u,{open:ce,onClose:()=>de(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(y,{sx:{borderBottom:"1px solid #e0e0e0",bgcolor:"#E91E63",color:"white"},children:t.jsx(n,{variant:"h6",sx:{fontWeight:600,color:"white",fontFamily:'"Montserrat", sans-serif'},children:"Write a Review"})}),t.jsx(j,{sx:{pt:3},children:t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t.jsxs(i,{children:[t.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,mb:1,fontFamily:'"Montserrat", sans-serif'},children:"Rating *"}),t.jsx(i,{sx:{display:"flex",gap:1},children:[1,2,3,4,5].map(e=>t.jsx(d,{onClick:()=>Oe("rating",e),sx:{color:e<=xe.rating?"#FFD700":"#ddd",fontSize:"2rem","&:hover":{color:e<=xe.rating?"#FFD700":"#ccc"}},children:"★"},e))})]}),t.jsx(v,{label:"Your Name *",value:xe.customer_name,onChange:e=>Oe("customer_name",e.target.value),fullWidth:!0,variant:"outlined"}),t.jsx(v,{label:"Your Email *",type:"email",value:xe.customer_email,onChange:e=>Oe("customer_email",e.target.value),fullWidth:!0,variant:"outlined"}),t.jsx(v,{label:"Your Review *",value:xe.review_text,onChange:e=>Oe("review_text",e.target.value),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"Share your experience with this product...",sx:{"& .MuiInputLabel-root":{fontFamily:'"Nunito Sans", sans-serif'},"& .MuiInputBase-input":{fontFamily:'"Nunito Sans", sans-serif'}}})]})}),t.jsxs(w,{sx:{p:3,borderTop:"1px solid #e0e0e0",bgcolor:"#E91E63"},children:[t.jsx(a,{onClick:()=>de(!1),sx:{color:"white"},children:"Cancel"}),t.jsx(a,{onClick:async()=>{if(xe.rating&&xe.review_text&&xe.customer_name&&xe.customer_email){fe(!0);try{const e=await I.post(`/product/${M}/review`,xe);e.data?.success&&(V({open:!0,message:"Review submitted successfully!",severity:"success"}),de(!1),he({rating:0,review_text:"",customer_name:"",customer_email:""}),Ae(),Be())}catch(e){V({open:!0,message:e.response?.data?.error||"Failed to submit review",severity:"error"})}finally{fe(!1)}}else V({open:!0,message:"Please fill all required fields",severity:"error"})},variant:"contained",disabled:ge,sx:{bgcolor:"white",color:"#E91E63","&:hover":{bgcolor:"#f5f5f5",color:"#C2185B"},"&:disabled":{bgcolor:"#ccc",color:"#666"}},children:ge?"Submitting...":"Submit Review"})]})]}),t.jsx(u,{open:me.open,onClose:Me,maxWidth:!1,PaperProps:{sx:{width:"100vw",height:"100vh",maxWidth:"100vw",maxHeight:"100vh",m:0,bgcolor:"rgba(0, 0, 0, 0.95)",borderRadius:0,overflow:"hidden"}},onWheel:e=>{if(me.open){e.preventDefault();const s=e.deltaY>0?-.1:.1;ue(e=>Math.max(.5,Math.min(3,e+s)))}},children:t.jsxs(i,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative"},children:[t.jsxs(i,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"transparent",p:3},children:[t.jsx(i,{sx:{flex:1}}),t.jsxs(i,{sx:{display:"flex",gap:1},children:[t.jsx(d,{onClick:()=>{ue(e=>Math.max(e-.25,.5))},disabled:be<=.5,sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"},"&:disabled":{opacity:.3}},children:t.jsx(S,{})}),t.jsx(d,{onClick:Ne,sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"}},title:"Reset Zoom",children:t.jsx(k,{})}),t.jsx(d,{onClick:()=>{ue(e=>Math.min(e+.25,3))},disabled:be>=3,sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"},"&:disabled":{opacity:.3}},children:t.jsx(C,{})}),t.jsx(d,{onClick:Me,sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 0, 0, 0.3)"}},children:t.jsx(F,{})})]})]}),t.jsx(i,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative",cursor:be>1?ve?"grabbing":"grab":"default"},onMouseDown:e=>{be>1&&(we(!0),ke({x:e.clientX-ye.x,y:e.clientY-ye.y}))},onMouseMove:e=>{ve&&be>1&&je({x:e.clientX-Se.x,y:e.clientY-Se.y})},onMouseUp:He,onMouseLeave:He,onDoubleClick:()=>{be>1?Ne():ue(2)},children:t.jsx(i,{component:"img",src:me.image,alt:L?.name||"Product",sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",transform:`scale(${be}) translate(${ye.x/be}px, ${ye.y/be}px)`,transition:ve?"none":"transform 0.1s ease-out",userSelect:"none",WebkitUserDrag:"none"}})}),Ie.length>1&&t.jsxs(t.Fragment,{children:[t.jsx(d,{onClick:()=>{const e=(me.index-1+Ie.length)%Ie.length;De(Ie[e],e)},sx:{position:"absolute",left:20,top:"50%",transform:"translateY(-50%)",color:"white",bgcolor:"rgba(255, 255, 255, 0.2)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.3)"},zIndex:1e3},children:t.jsx(x,{})}),t.jsx(d,{onClick:()=>{const e=(me.index+1)%Ie.length;De(Ie[e],e)},sx:{position:"absolute",right:20,top:"50%",transform:"translateY(-50%)",color:"white",bgcolor:"rgba(255, 255, 255, 0.2)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.3)"},zIndex:1e3},children:t.jsx(h,{})})]}),Ie.length>1&&t.jsx(i,{sx:{position:"absolute",bottom:0,left:0,right:0,zIndex:1e3,display:"flex",justifyContent:"center",gap:1,p:2,bgcolor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",overflowX:"auto"},children:Ie.map((e,s)=>t.jsx(i,{component:"img",src:e,alt:`Thumbnail ${s+1}`,onClick:()=>{pe(o=>({...o,image:e,index:s})),ze(s),ue(1),je({x:0,y:0})},sx:{width:80,height:80,objectFit:"cover",borderRadius:1,border:me.index===s?"3px solid #667eea":"2px solid transparent",cursor:"pointer",opacity:me.index===s?1:.7,transition:"all 0.3s","&:hover":{opacity:1,transform:"scale(1.1)"}}},s))})]})}),t.jsx(R,{open:Z,onClose:()=>q(!1),onLoginSuccess:e=>{q(!1),O(e),Te()},message:"Please login to add items to cart"}),t.jsx(W,{open:Q.open,autoHideDuration:3e3,onClose:()=>V({...Q,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(_,{onClose:()=>V({...Q,open:!1}),severity:Q.severity,sx:{width:"100%"},children:Q.message})})]})};export{M as default};
