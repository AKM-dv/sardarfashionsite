import{u as e,a as s,r,a6 as t,j as i,B as o,T as a,h as n,ah as l,ai as c,I as d,a0 as x,a1 as h,W as f,aj as p,ak as g,al as m,am as b,D as u,b as y,c as j,f as v,g as S,a7 as w,A as F}from"./mui-CLbw_gaj.js";import{u as k,a as C,L as _}from"./index-Cnr8SIWr.js";import{c as W,u as E}from"./router-BiFerjYI.js";import"./vendor-HnKmhvXM.js";import"./utils-CeR3a_hx.js";const R=()=>{const{productId:R}=W(),I=E(),D=e(),z=s(D.breakpoints.down("md")),{addToCart:N,isLoggedIn:H,login:M}=k(),[A,B]=r.useState(null),[T,L]=r.useState({}),[O,Y]=r.useState(!1),[P,$]=r.useState(!0),[G,U]=r.useState(!1),[Q,q]=r.useState({open:!1,message:"",severity:"success"}),[K,V]=r.useState(!1),[Z,J]=r.useState(!1),[X,ee]=r.useState(null),[se,re]=r.useState([]),[te,ie]=r.useState(!1),[oe,ae]=r.useState(!1),[ne,le]=r.useState({rating:0,review_text:"",customer_name:"",customer_email:""}),[ce,de]=r.useState(!1);r.useEffect(()=>{R&&(xe(),je(),ve())},[R]);const xe=async()=>{try{$(!0);const e=await C.get(`/product/${R}`);if(e.data?.success){const s=e.data.product,r={...s};B(r);const t={};s.variants&&Array.isArray(s.variants)&&s.variants.forEach(e=>{e.values&&e.values.length>0&&(t[e.name]=e.values[0])}),L(t)}}catch(e){B(null)}finally{$(!1)}},[he,fe]=r.useState(""),[pe,ge]=r.useState(0),[me,be]=r.useState([]),ue=t.useMemo(()=>{if(!A)return[];const e=`https://sardarfashions.mycartly.in/uploads/products/1532365/${A.product_id}`;return[e+"_v1.png",e+"_v2.png",e+"_v3.png",e+"_v4.png",e+"_v5.png"].filter((e,s)=>!0)},[A]);r.useEffect(()=>{if(ue.length>0){(async()=>{const e=[];for(let r=0;r<ue.length;r++)try{(await fetch(ue[r],{method:"HEAD"})).ok&&e.push(ue[r])}catch(s){}be(e),e.length>0&&(fe(e[0]),ge(0))})()}},[ue]),r.useEffect(()=>{},[he]);const ye=async()=>{if(A)if(H){V(!0);try{await N(A,1,T),q({open:!0,message:"Added to cart successfully!",severity:"success"})}catch(e){"LOGIN_REQUIRED"===e.message?U(!0):q({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{V(!1)}}else U(!0)},je=async()=>{try{const e=await C.get(`/product/${R}/reviews/summary`);e.data?.success&&ee(e.data.summary)}catch(e){}},ve=async(e=1,s="newest")=>{try{ie(!0);const r=await C.get(`/product/${R}/reviews`,{params:{page:e,sort_by:s}});r.data?.success&&re(r.data.reviews)}catch(r){}finally{ie(!1)}},Se=(e,s)=>{le(r=>({...r,[e]:s}))};if(P)return i.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:i.jsx(a,{children:"Loading product details..."})});if(!A)return i.jsxs(o,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"60vh",textAlign:"center",px:3},children:[i.jsx(a,{variant:"h4",sx:{fontWeight:600,color:"#333",mb:2,fontFamily:'"Montserrat", sans-serif'},children:"Product Not Found"}),i.jsx(a,{variant:"body1",sx:{color:"#666",mb:4,maxWidth:500,fontFamily:'"Nunito Sans", sans-serif',lineHeight:1.6},children:"Sorry, the product you're looking for doesn't exist or may have been removed."}),i.jsx(n,{variant:"contained",onClick:()=>I("/"),sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:600,px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)"}},children:"Continue Shopping"})]});const we=parseFloat(A.original_price||A.base_price)||0,Fe=parseFloat(A.price)||0,ke=Fe,Ce=we>0&&Fe<we?Math.round((we-Fe)/we*100):0,_e=(e=>{if(!e)return{main:"",sections:{},isHtml:!1};if(/<[^>]*>/g.test(e))return{main:e,sections:{},isHtml:!0};const s={},r=e.split("\n").filter(e=>e.trim());let t="main",i=[];for(const o of r)if(o.includes(":")){const[e,...r]=o.split(":"),a=e.trim().toUpperCase();a.includes("FABRIC")||a.includes("WORK")||a.includes("SIZE")||a.includes("WEIGHT")||a.includes("CARE")||a.includes("STITCH")?(t=a,s[t]=r.join(":").trim()):i.push(o)}else"main"===t?i.push(o):s[t]=(s[t]||"")+"\n"+o;return{main:i.join("\n"),sections:s,isHtml:!1}})(A.description);return i.jsxs(o,{sx:{width:"100%",maxWidth:1400,mx:"auto",px:{xs:2,md:4},py:4,minHeight:"100vh",bgcolor:"#fafafa"},children:[i.jsxs(l,{sx:{mb:4,fontSize:"0.875rem"},children:[i.jsx(c,{color:"inherit",href:"#",onClick:e=>{e.preventDefault(),I("/")},sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Home"}),i.jsx(c,{color:"inherit",href:"#",onClick:e=>{e.preventDefault(),I("/")},sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"All Brands"}),i.jsx(a,{color:"text.primary",children:A.name})]}),i.jsxs(o,{sx:{display:"flex",flexDirection:z?"column":"row",gap:{xs:3,md:4},alignItems:"flex-start",mb:4},children:[i.jsx(o,{sx:{flex:{md:"0 0 50%"},width:"100%",display:"flex",gap:3},children:i.jsxs(o,{sx:{display:"flex",gap:3,width:"100%"},children:[i.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:1.5,width:"100px",flexShrink:0},children:me.map((e,s)=>i.jsx(o,{component:"img",src:e,alt:A?.name||"Product",onClick:()=>((e,s)=>{fe(e),ge(s)})(e,s),sx:{width:"100%",height:"100px",objectFit:"cover",border:pe===s?"3px solid #667eea":"2px solid #e5e7eb",borderRadius:3,cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:pe===s?"0 4px 12px rgba(102, 126, 234, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)","&:hover":{border:"3px solid #667eea",transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.4)"}},onError:e=>{e.target.style.display="none"}},s))}),i.jsxs(o,{sx:{position:"relative",flex:1,height:{xs:400,sm:450,md:550},backgroundColor:"#ffffff",borderRadius:4,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #f3f4f6",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)"},children:[i.jsx("img",{src:he,alt:A?.name||"Product",style:{width:"100%",height:"100%",objectFit:"cover",maxWidth:"100%",maxHeight:"100%",transition:"all 0.3s ease"},onError:e=>{e.target.style.display="none"},onLoad:e=>{}},he),me.length>1&&i.jsxs(i.Fragment,{children:[i.jsx(d,{onClick:()=>{const e=0===pe?me.length-1:pe-1;ge(e),fe(me[e])},sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#374151",width:48,height:48,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.2)"}},children:i.jsx(x,{sx:{fontSize:24}})}),i.jsx(d,{onClick:()=>{const e=(pe+1)%me.length;ge(e),fe(me[e])},sx:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#374151",width:48,height:48,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.2)"}},children:i.jsx(h,{sx:{fontSize:24}})}),i.jsxs(o,{sx:{position:"absolute",bottom:16,right:16,backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[pe+1," / ",me.length]})]}),Ce>0&&i.jsxs(o,{sx:{position:"absolute",top:16,left:16,backgroundColor:"#dc2626",color:"white",px:2,py:1,borderRadius:3,fontSize:"0.8rem",fontWeight:700,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 4px 16px rgba(220, 38, 38, 0.3)",textTransform:"uppercase",letterSpacing:"0.5px"},children:["-",Ce,"% OFF"]})]})]})}),i.jsxs(o,{sx:{flex:{md:"0 0 50%"},width:"100%",display:"flex",flexDirection:"column",gap:3},children:[i.jsxs(o,{sx:{position:"relative"},children:[i.jsx(a,{variant:"body2",sx:{color:"#E91E63",textTransform:"uppercase",fontWeight:600,mb:1,fontFamily:'"Montserrat", sans-serif'},children:A.brand||"SARDAR FASHIONS"}),i.jsx(a,{variant:z?"h5":"h4",sx:{fontWeight:500,color:"#222",lineHeight:1.3,mb:0,pr:6,fontFamily:'"Montserrat", sans-serif'},children:A.name}),i.jsx(d,{onClick:()=>{Y(!O)},sx:{position:"absolute",top:0,right:0,color:O?"#e74c3c":"#666"},children:O?i.jsx(f,{}):i.jsx(p,{})})]}),X&&i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:0},children:[i.jsx(o,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(e=>i.jsx(o,{component:"span",sx:{color:e<=X.average_rating?"#FFD700":"#ddd",fontSize:"1.2rem"},children:"★"},e))}),i.jsxs(a,{sx:{fontSize:"0.9rem",color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:["(",X.total_reviews," reviews)"]})]}),i.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:.5,mb:0,p:2,bgcolor:"#f8f9fa",borderRadius:2,border:"1px solid #e9ecef"},children:[Ce>0?i.jsxs(i.Fragment,{children:[i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsxs(a,{variant:z?"h4":"h3",sx:{fontWeight:800,color:"#667eea",fontFamily:'"Montserrat", sans-serif'},children:["₹",ke.toLocaleString("en-IN")]}),i.jsx(g,{label:`-${Ce}% OFF`,sx:{bgcolor:"#dc2626",color:"white",fontWeight:700,fontSize:"0.8rem",height:28}})]}),i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsxs(a,{variant:"h6",sx:{color:"#6b7280",textDecoration:"line-through",fontFamily:'"Nunito Sans", sans-serif',fontWeight:500},children:["MRP: ₹",we.toLocaleString()]}),i.jsxs(a,{variant:"body2",sx:{color:"#059669",fontWeight:600,fontFamily:'"Nunito Sans", sans-serif'},children:["Save ₹",(we-ke).toLocaleString()]})]})]}):i.jsxs(a,{variant:z?"h4":"h3",sx:{fontWeight:800,color:"#667eea",fontFamily:'"Montserrat", sans-serif'},children:["₹",ke.toLocaleString("en-IN")]}),i.jsx(a,{variant:"body2",sx:{color:"#6b7280",fontFamily:'"Nunito Sans", sans-serif',fontSize:"0.8rem",fontStyle:"italic",mt:.5},children:"All taxes included. No extra GST. Shipping calculated at checkout."})]}),i.jsxs(o,{sx:{display:"flex",gap:2,mb:0,width:"100%"},children:[i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:A.in_stock?"#f0fdf4":"#fef2f2",borderRadius:2,border:"1px solid "+(A.in_stock?"#bbf7d0":"#fecaca"),flex:1},children:[i.jsx(o,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:A.in_stock?"#16a34a":"#dc2626",boxShadow:"0 0 0 2px "+(A.in_stock?"#bbf7d0":"#fecaca")}}),i.jsxs(o,{sx:{display:"flex",flexDirection:"column"},children:[i.jsx(a,{variant:"body1",sx:{color:A.in_stock?"#166534":"#991b1b",fontWeight:600,fontFamily:'"Montserrat", sans-serif'},children:A.in_stock?"In Stock":"Out of Stock"}),i.jsx(a,{variant:"body2",sx:{color:A.in_stock?"#15803d":"#b91c1c",fontFamily:'"Nunito Sans", sans-serif'},children:A.in_stock?`${A.stock} units available`:"Currently unavailable"})]})]}),i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:"#f0f8ff",borderRadius:2,border:"1px solid #bfdbfe",flex:1},children:[i.jsx(o,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"#3b82f6",boxShadow:"0 0 0 2px #bfdbfe"}}),i.jsxs(o,{sx:{display:"flex",flexDirection:"column"},children:[i.jsx(a,{variant:"body1",sx:{color:"#1e40af",fontWeight:600,fontFamily:'"Montserrat", sans-serif'},children:"Fast Delivery"}),i.jsx(a,{variant:"body2",sx:{color:"#1d4ed8",fontFamily:'"Nunito Sans", sans-serif'},children:"Within 3 to 5 days"})]})]})]}),A.variants&&A.variants.length>0&&i.jsx(o,{sx:{mb:3},children:A.variants.map((e,s)=>i.jsxs(o,{sx:{mb:2},children:[i.jsxs(a,{variant:"subtitle1",sx:{fontWeight:600,mb:1.5,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:["Select ",e.name]}),i.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.values?.map((s,r)=>i.jsx(n,{variant:T[e.name]===s?"contained":"outlined",onClick:()=>{return r=e.name,t=s,void L(e=>({...e,[r]:t}));var r,t},sx:{minWidth:80,py:1,px:2,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.9rem",...T[e.name]===s&&{bgcolor:"#E91E63",color:"white","&:hover":{bgcolor:"#C2185B"}},...T[e.name]!==s&&{borderColor:"#e0e0e0",color:"#333","&:hover":{borderColor:"#E91E63",color:"#E91E63"}}},children:s},r))})]},s))}),i.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:[i.jsx(n,{variant:"contained",size:"large",fullWidth:!0,disabled:!A.in_stock||K,onClick:ye,startIcon:i.jsx(m,{}),sx:{py:2.5,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:700,textTransform:"none",fontSize:"1.1rem",borderRadius:3,boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)",boxShadow:"0 12px 35px rgba(102, 126, 234, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%)",color:"#666",boxShadow:"none",transform:"none"}},children:K?"Adding to Cart...":A.in_stock?"Add to Cart":"Out of Stock"}),i.jsx(n,{variant:"contained",size:"large",fullWidth:!0,disabled:!A.in_stock||Z,onClick:async()=>{if(A)if(H){J(!0);try{await N(A,1,T),I("/checkout")}catch(e){"LOGIN_REQUIRED"===e.message?U(!0):q({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{J(!1)}}else U(!0)},sx:{py:2.5,background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",fontWeight:700,textTransform:"none",fontSize:"1.1rem",borderRadius:3,boxShadow:"0 8px 25px rgba(233, 30, 99, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)",boxShadow:"0 12px 35px rgba(233, 30, 99, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%)",color:"#666",boxShadow:"none",transform:"none"}},children:Z?"Processing...":A.in_stock?"Buy Now":"Out of Stock"}),i.jsx(n,{variant:"outlined",size:"small",onClick:()=>{navigator.share?navigator.share({title:A.name,text:A.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),q({open:!0,message:"Link copied to clipboard!",severity:"success"}))},startIcon:i.jsx(b,{}),sx:{py:1,px:2,alignSelf:"flex-start",borderColor:"#667eea",color:"#667eea",fontWeight:500,textTransform:"none",fontSize:"0.8rem",borderRadius:2,borderWidth:1,minWidth:"120px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"#5a6fd8",backgroundColor:"rgba(102, 126, 234, 0.05)",transform:"translateY(-1px)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.2)"}},children:"Share"})]}),A.description&&i.jsxs(o,{sx:{mt:4,pt:4,borderTop:"1px solid #e0e0e0"},children:[i.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:"Product Description"}),_e.main&&i.jsx(o,{sx:{color:"#555",lineHeight:1.7,mb:3,fontFamily:'"Nunito Sans", sans-serif',fontSize:"1rem","& p":{marginBottom:"1rem","&:last-child":{marginBottom:0}},"& ul":{paddingLeft:"1.5rem",marginBottom:"1rem"},"& li":{marginBottom:"0.5rem","& strong":{fontWeight:600,color:"#333"}},"& strong":{fontWeight:600,color:"#333"}},children:_e.isHtml?i.jsx("div",{dangerouslySetInnerHTML:{__html:_e.main}}):i.jsx(a,{variant:"body1",children:_e.main})}),!_e.isHtml&&Object.keys(_e.sections).length>0&&i.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.entries(_e.sections).map(([e,s])=>i.jsxs(o,{sx:{p:2,bgcolor:"#f8f9fa",borderRadius:2,border:"1px solid #e9ecef"},children:[i.jsx(a,{variant:"subtitle2",sx:{fontWeight:700,color:"#333",mb:1,fontFamily:'"Montserrat", sans-serif',textTransform:"uppercase",letterSpacing:"0.5px"},children:e.replace(/_/g," ")}),i.jsx(a,{variant:"body2",sx:{color:"#666",lineHeight:1.6,fontFamily:'"Nunito Sans", sans-serif'},children:s})]},e))})]})]})]}),i.jsxs(o,{sx:{mt:2},children:[i.jsx(a,{variant:"h6",sx:{fontWeight:600,mb:1,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:"Customer Reviews"}),X&&i.jsxs(o,{sx:{mb:3,p:2,bgcolor:"#f8f9fa",borderRadius:2},children:[i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:1.5},children:[i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#E91E63",fontFamily:'"Montserrat", sans-serif'},children:X.average_rating}),i.jsx(o,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(e=>i.jsx(o,{component:"span",sx:{color:e<=X.average_rating?"#FFD700":"#ddd",fontSize:"1.5rem"},children:"★"},e))})]}),i.jsxs(a,{variant:"body1",sx:{color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:["Based on ",X.total_reviews," reviews"]}),i.jsx(n,{variant:"contained",onClick:()=>ae(!0),sx:{bgcolor:"#E91E63",color:"white","&:hover":{bgcolor:"#C2185B"}},children:"Write a Review"})]}),X.total_reviews>0&&i.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:1},children:[5,4,3,2,1].map(e=>i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[i.jsxs(a,{variant:"body2",sx:{minWidth:20,fontFamily:'"Nunito Sans", sans-serif'},children:[e,"★"]}),i.jsx(o,{sx:{flex:1,bgcolor:"#ddd",height:8,borderRadius:4,overflow:"hidden"},children:i.jsx(o,{sx:{width:`${X.rating_percentages[e]}%`,height:"100%",bgcolor:"#E91E63",borderRadius:4}})}),i.jsx(a,{variant:"body2",sx:{minWidth:40,textAlign:"right",fontFamily:'"Nunito Sans", sans-serif'},children:X.rating_distribution[e]})]},e))})]}),i.jsx(o,{sx:{mb:4},children:te?i.jsx(o,{sx:{display:"flex",justifyContent:"center",py:4},children:i.jsx(a,{sx:{fontFamily:'"Nunito Sans", sans-serif'},children:"Loading reviews..."})}):se.length>0?i.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:3},children:[se.map(e=>i.jsxs(o,{sx:{p:3,border:"1px solid #e0e0e0",borderRadius:2},children:[i.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[i.jsxs(o,{children:[i.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,fontFamily:'"Montserrat", sans-serif'},children:e.customer_name}),i.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[i.jsx(o,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(s=>i.jsx(o,{component:"span",sx:{color:s<=e.rating?"#FFD700":"#ddd",fontSize:"0.9rem"},children:"★"},s))}),i.jsx(a,{variant:"body2",sx:{color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:new Date(e.created_at).toLocaleDateString()})]})]}),e.is_verified_purchase&&i.jsx(g,{label:"Verified Purchase",size:"small",sx:{bgcolor:"#4caf50",color:"white",fontSize:"0.7rem"}})]}),i.jsx(a,{variant:"body1",sx:{mb:2,lineHeight:1.6,fontFamily:'"Nunito Sans", sans-serif'},children:e.review_text}),e.admin_reply&&i.jsxs(o,{sx:{mt:2,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:[i.jsx(a,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"#E91E63"},children:"Store Response"}),i.jsx(a,{variant:"body2",children:e.admin_reply})]})]},e.review_id)),i.jsx(o,{sx:{textAlign:"center",mt:3,pt:3,borderTop:"1px solid #e0e0e0"},children:i.jsx(n,{variant:"contained",onClick:()=>ae(!0),sx:{bgcolor:"#E91E63",color:"white",px:4,py:1.5,"&:hover":{bgcolor:"#C2185B"}},children:"Write a Review"})})]}):i.jsxs(o,{sx:{textAlign:"center",py:4},children:[i.jsx(a,{variant:"body1",sx:{color:"#666",mb:2,fontFamily:'"Nunito Sans", sans-serif'},children:"No reviews yet. Be the first to review this product!"}),i.jsx(n,{variant:"contained",onClick:()=>ae(!0),sx:{bgcolor:"white",color:"#E91E63","&:hover":{bgcolor:"#f5f5f5",color:"#C2185B"}},children:"Write the First Review"})]})})]}),i.jsxs(u,{open:oe,onClose:()=>ae(!1),maxWidth:"sm",fullWidth:!0,children:[i.jsx(y,{sx:{borderBottom:"1px solid #e0e0e0",bgcolor:"#E91E63",color:"white"},children:i.jsx(a,{variant:"h6",sx:{fontWeight:600,color:"white",fontFamily:'"Montserrat", sans-serif'},children:"Write a Review"})}),i.jsx(j,{sx:{pt:3},children:i.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:3},children:[i.jsxs(o,{children:[i.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:1,fontFamily:'"Montserrat", sans-serif'},children:"Rating *"}),i.jsx(o,{sx:{display:"flex",gap:1},children:[1,2,3,4,5].map(e=>i.jsx(d,{onClick:()=>Se("rating",e),sx:{color:e<=ne.rating?"#FFD700":"#ddd",fontSize:"2rem","&:hover":{color:e<=ne.rating?"#FFD700":"#ccc"}},children:"★"},e))})]}),i.jsx(v,{label:"Your Name *",value:ne.customer_name,onChange:e=>Se("customer_name",e.target.value),fullWidth:!0,variant:"outlined"}),i.jsx(v,{label:"Your Email *",type:"email",value:ne.customer_email,onChange:e=>Se("customer_email",e.target.value),fullWidth:!0,variant:"outlined"}),i.jsx(v,{label:"Your Review *",value:ne.review_text,onChange:e=>Se("review_text",e.target.value),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"Share your experience with this product...",sx:{"& .MuiInputLabel-root":{fontFamily:'"Nunito Sans", sans-serif'},"& .MuiInputBase-input":{fontFamily:'"Nunito Sans", sans-serif'}}})]})}),i.jsxs(S,{sx:{p:3,borderTop:"1px solid #e0e0e0",bgcolor:"#E91E63"},children:[i.jsx(n,{onClick:()=>ae(!1),sx:{color:"white"},children:"Cancel"}),i.jsx(n,{onClick:async()=>{if(ne.rating&&ne.review_text&&ne.customer_name&&ne.customer_email){de(!0);try{const e=await C.post(`/product/${R}/review`,ne);e.data?.success&&(q({open:!0,message:"Review submitted successfully!",severity:"success"}),ae(!1),le({rating:0,review_text:"",customer_name:"",customer_email:""}),je(),ve())}catch(e){q({open:!0,message:e.response?.data?.error||"Failed to submit review",severity:"error"})}finally{de(!1)}}else q({open:!0,message:"Please fill all required fields",severity:"error"})},variant:"contained",disabled:ce,sx:{bgcolor:"white",color:"#E91E63","&:hover":{bgcolor:"#f5f5f5",color:"#C2185B"},"&:disabled":{bgcolor:"#ccc",color:"#666"}},children:ce?"Submitting...":"Submit Review"})]})]}),i.jsx(_,{open:G,onClose:()=>U(!1),onLoginSuccess:e=>{U(!1),M(e),ye()},message:"Please login to add items to cart"}),i.jsx(w,{open:Q.open,autoHideDuration:3e3,onClose:()=>q({...Q,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:i.jsx(F,{onClose:()=>q({...Q,open:!1}),severity:Q.severity,sx:{width:"100%"},children:Q.message})})]})};export{R as default};
