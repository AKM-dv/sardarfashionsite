import{u as e,a as s,r as o,a6 as r,j as t,B as i,T as n,h as a,ai as l,aj as c,I as d,a0 as x,a1 as h,W as f,ak as g,al as p,am as m,an as b,D as u,b as y,c as j,f as v,g as w,ao as S,ap as k,i as C,a7 as F,A as W}from"./mui-CYltanDZ.js";import{u as _,a as z,L as I}from"./index-B193kekq.js";import{c as E,u as R}from"./router-Bir15TBb.js";import"./vendor-HnKmhvXM.js";import"./utils-CSgk65FE.js";const D=()=>{const{productId:D}=E(),M=R(),N=e(),H=s(N.breakpoints.down("md")),{addToCart:T,isLoggedIn:A,login:B}=_(),[O,L]=o.useState(null),[Y,P]=o.useState({}),[$,U]=o.useState(!1),[G,K]=o.useState(!0),[X,q]=o.useState(!1),[Q,V]=o.useState({open:!1,message:"",severity:"success"}),[Z,J]=o.useState(!1),[ee,se]=o.useState(!1),[oe,re]=o.useState(null),[te,ie]=o.useState([]),[ne,ae]=o.useState(!1),[le,ce]=o.useState(!1),[de,xe]=o.useState({rating:0,review_text:"",customer_name:"",customer_email:""}),[he,fe]=o.useState(!1),[ge,pe]=o.useState({open:!1,image:"",index:0}),[me,be]=o.useState(1),[ue,ye]=o.useState({x:0,y:0}),[je,ve]=o.useState(!1),[we,Se]=o.useState({x:0,y:0});o.useEffect(()=>{D&&(ke(),He(),Te())},[D]);const ke=async()=>{try{K(!0);const e=await z.get(`/product/${D}`);if(e.data?.success){const s=e.data.product,o={...s};L(o);const r={};s.variants&&Array.isArray(s.variants)&&s.variants.forEach(e=>{e.values&&e.values.length>0&&(r[e.name]=e.values[0])}),P(r)}}catch(e){L(null)}finally{K(!1)}},[Ce,Fe]=o.useState(""),[We,_e]=o.useState(0),[ze,Ie]=o.useState([]),Ee=r.useMemo(()=>{if(!O)return[];const e=`https://sardarfashions.mycartly.in/uploads/products/1532365/${O.product_id}`;return[e+"_v1.png",e+"_v2.png",e+"_v3.png",e+"_v4.png",e+"_v5.png"].filter((e,s)=>!0)},[O]);o.useEffect(()=>{if(Ee.length>0){(async()=>{const e=[];for(let o=0;o<Ee.length;o++)try{(await fetch(Ee[o],{method:"HEAD"})).ok&&e.push(Ee[o])}catch(s){}Ie(e),e.length>0&&(Fe(e[0]),_e(0))})()}},[Ee]),o.useEffect(()=>{},[Ce]);const Re=(e,s)=>{pe({open:!0,image:e,index:s}),_e(s),Fe(e),be(1),ye({x:0,y:0})},De=()=>{pe({open:!1,image:"",index:0}),be(1),ye({x:0,y:0})},Me=()=>{ve(!1)},Ne=async()=>{if(O){J(!0);try{await T(O,1,Y),V({open:!0,message:"Added to cart successfully!",severity:"success"})}catch(e){"OUT_OF_STOCK"===e.message?V({open:!0,message:"Sorry, this product is currently out of stock",severity:"warning"}):V({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{J(!1)}}},He=async()=>{try{const e=await z.get(`/product/${D}/reviews/summary`);e.data?.success&&re(e.data.summary)}catch(e){}},Te=async(e=1,s="newest")=>{try{ae(!0);const o=await z.get(`/product/${D}/reviews`,{params:{page:e,sort_by:s}});o.data?.success&&ie(o.data.reviews)}catch(o){}finally{ae(!1)}},Ae=(e,s)=>{xe(o=>({...o,[e]:s}))};if(G)return t.jsx(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:t.jsx(n,{children:"Loading product details..."})});if(!O)return t.jsxs(i,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"60vh",textAlign:"center",px:3},children:[t.jsx(n,{variant:"h4",sx:{fontWeight:600,color:"#333",mb:2,fontFamily:'"Montserrat", sans-serif'},children:"Product Not Found"}),t.jsx(n,{variant:"body1",sx:{color:"#666",mb:4,maxWidth:500,fontFamily:'"Nunito Sans", sans-serif',lineHeight:1.6},children:"Sorry, the product you're looking for doesn't exist or may have been removed."}),t.jsx(a,{variant:"contained",onClick:()=>M("/"),sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:600,px:4,py:1.5,borderRadius:3,textTransform:"none",fontSize:"1rem","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)",transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)"}},children:"Continue Shopping"})]});const Be=parseFloat(O.original_price||O.base_price)||0,Oe=parseFloat(O.price)||0,Le=Oe,Ye=Be>0&&Oe<Be?Math.round((Be-Oe)/Be*100):0,Pe=(e=>{if(!e)return{main:"",sections:{},isHtml:!1};if(/<[^>]*>/g.test(e))return{main:e,sections:{},isHtml:!0};const s={},o=e.split("\n").filter(e=>e.trim());let r="main",t=[];for(const i of o)if(i.includes(":")){const[e,...o]=i.split(":"),n=e.trim().toUpperCase();n.includes("FABRIC")||n.includes("WORK")||n.includes("SIZE")||n.includes("WEIGHT")||n.includes("CARE")||n.includes("STITCH")?(r=n,s[r]=o.join(":").trim()):t.push(i)}else"main"===r?t.push(i):s[r]=(s[r]||"")+"\n"+i;return{main:t.join("\n"),sections:s,isHtml:!1}})(O.description);return t.jsxs(i,{sx:{width:"100%",maxWidth:1400,mx:"auto",px:{xs:2,sm:3,md:4},py:{xs:2,sm:3,md:4},bgcolor:"#fafafa",overflow:"hidden",boxSizing:"border-box"},children:[t.jsxs(l,{sx:{mb:{xs:2,md:4},fontSize:{xs:"0.75rem",sm:"0.875rem"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},children:[t.jsx(c,{color:"inherit",href:"#",onClick:e=>{e.preventDefault(),M("/")},sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Home"}),t.jsx(c,{color:"inherit",href:"#",onClick:e=>{e.preventDefault(),M("/")},sx:{textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"All Brands"}),t.jsx(n,{color:"text.primary",children:O.name})]}),t.jsxs(i,{sx:{display:"flex",flexDirection:H?"column":"row",gap:{xs:2,sm:3,md:4},alignItems:"flex-start",mb:{xs:2,md:4},width:"100%",boxSizing:"border-box"},children:[t.jsx(i,{sx:{flex:{md:"0 0 50%"},width:"100%",maxWidth:{md:"50%"},display:"flex",gap:{xs:1.5,sm:2,md:3},boxSizing:"border-box"},children:t.jsxs(i,{sx:{display:"flex",gap:{xs:1.5,sm:2,md:3},width:"100%",boxSizing:"border-box"},children:[t.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:{xs:1,sm:1.5},width:{xs:"60px",sm:"80px",md:"100px"},flexShrink:0},children:ze.map((e,s)=>t.jsx(i,{sx:{width:"100%",height:{xs:"60px",sm:"80px",md:"100px"},minHeight:{xs:"60px",sm:"80px",md:"100px"},maxHeight:{xs:"60px",sm:"80px",md:"100px"},border:We===s?"3px solid #667eea":"2px solid #e5e7eb",borderRadius:3,cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:We===s?"0 4px 12px rgba(102, 126, 234, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",backgroundColor:"#f8f9fa",display:"flex",alignItems:"center",justifyContent:"center","&:hover":{border:"3px solid #667eea",transform:"scale(1.05)",boxShadow:"0 6px 20px rgba(102, 126, 234, 0.4)"}},onClick:()=>((e,s)=>{Fe(e),_e(s)})(e,s),children:t.jsx(i,{component:"img",src:e,alt:O?.name||"Product",sx:{width:"100%",height:"100%",objectFit:"contain",display:"block",pointerEvents:"none"},onError:e=>{e.target.style.display="none"}})},s))}),t.jsxs(i,{sx:{position:"relative",flex:1,width:"100%",maxWidth:"100%",height:{xs:"auto",sm:"auto",md:"auto"},maxHeight:{xs:"400px",sm:"500px",md:"600px"},aspectRatio:{xs:"3/4",sm:"4/5",md:"4/3"},backgroundColor:"#ffffff",borderRadius:4,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #f3f4f6",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",background:"linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)",boxSizing:"border-box"},children:[t.jsx("img",{src:Ce,alt:O?.name||"Product",onClick:()=>Re(Ce,We),style:{width:"100%",height:"100%",objectFit:"contain",maxWidth:"100%",maxHeight:"100%",transition:"all 0.3s ease",display:"block",cursor:"zoom-in"},onError:e=>{e.target.style.display="none"},onLoad:e=>{}},Ce),ze.length>1&&t.jsxs(t.Fragment,{children:[t.jsx(d,{onClick:()=>{const e=0===We?ze.length-1:We-1;_e(e),Fe(ze[e])},sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#374151",width:48,height:48,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.2)"}},children:t.jsx(x,{sx:{fontSize:24}})}),t.jsx(d,{onClick:()=>{const e=(We+1)%ze.length;_e(e),Fe(ze[e])},sx:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.95)",color:"#374151",width:48,height:48,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 1)",transform:"translateY(-50%) scale(1.1)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.2)"}},children:t.jsx(h,{sx:{fontSize:24}})}),t.jsxs(i,{sx:{position:"absolute",bottom:16,right:16,backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",px:2,py:1,borderRadius:2,fontSize:"0.8rem",fontWeight:600,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[We+1," / ",ze.length]})]}),Ye>0&&t.jsxs(i,{sx:{position:"absolute",top:16,left:16,backgroundColor:"#dc2626",color:"white",px:2,py:1,borderRadius:3,fontSize:"0.8rem",fontWeight:700,zIndex:10,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 4px 16px rgba(220, 38, 38, 0.3)",textTransform:"uppercase",letterSpacing:"0.5px"},children:["-",Ye,"% OFF"]})]})]})}),t.jsxs(i,{sx:{flex:{md:"0 0 50%"},width:"100%",maxWidth:{md:"50%"},display:"flex",flexDirection:"column",gap:{xs:2,sm:2.5,md:3},boxSizing:"border-box",overflow:"hidden"},children:[t.jsxs(i,{sx:{position:"relative"},children:[t.jsx(n,{variant:"body2",sx:{color:"#E91E63",textTransform:"uppercase",fontWeight:600,mb:1,fontFamily:'"Montserrat", sans-serif'},children:O.brand||"SARDAR FASHIONS"}),t.jsx(n,{variant:H?"h5":"h4",sx:{fontWeight:500,color:"#222",lineHeight:1.3,mb:0,pr:6,fontFamily:'"Montserrat", sans-serif'},children:O.name}),t.jsx(d,{onClick:()=>{U(!$)},sx:{position:"absolute",top:0,right:0,color:$?"#e74c3c":"#666"},children:$?t.jsx(f,{}):t.jsx(g,{})})]}),oe&&t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,mb:0},children:[t.jsx(i,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(e=>t.jsx(i,{component:"span",sx:{color:e<=oe.average_rating?"#FFD700":"#ddd",fontSize:"1.2rem"},children:"★"},e))}),t.jsxs(n,{sx:{fontSize:"0.9rem",color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:["(",oe.total_reviews," reviews)"]})]}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:.5,mb:0,p:2,bgcolor:"#f8f9fa",borderRadius:2,border:"1px solid #e9ecef"},children:[Ye>0?t.jsxs(t.Fragment,{children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsxs(n,{variant:H?"h4":"h3",sx:{fontWeight:800,color:"#667eea",fontFamily:'"Montserrat", sans-serif'},children:["₹",Le.toLocaleString("en-IN")]}),t.jsx(p,{label:`-${Ye}% OFF`,sx:{bgcolor:"#dc2626",color:"white",fontWeight:700,fontSize:"0.8rem",height:28}})]}),t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsxs(n,{variant:"h6",sx:{color:"#6b7280",textDecoration:"line-through",fontFamily:'"Nunito Sans", sans-serif',fontWeight:500},children:["MRP: ₹",Be.toLocaleString()]}),t.jsxs(n,{variant:"body2",sx:{color:"#059669",fontWeight:600,fontFamily:'"Nunito Sans", sans-serif'},children:["Save ₹",(Be-Le).toLocaleString()]})]})]}):t.jsxs(n,{variant:H?"h4":"h3",sx:{fontWeight:800,color:"#667eea",fontFamily:'"Montserrat", sans-serif'},children:["₹",Le.toLocaleString("en-IN")]}),t.jsx(n,{variant:"body2",sx:{color:"#6b7280",fontFamily:'"Nunito Sans", sans-serif',fontSize:"0.8rem",fontStyle:"italic",mt:.5},children:"All taxes included. No extra GST. Shipping calculated at checkout."})]}),t.jsxs(i,{sx:{display:"flex",gap:2,mb:0,width:"100%"},children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:O.in_stock?"#f0fdf4":"#fef2f2",borderRadius:2,border:"1px solid "+(O.in_stock?"#bbf7d0":"#fecaca"),flex:1},children:[t.jsx(i,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:O.in_stock?"#16a34a":"#dc2626",boxShadow:"0 0 0 2px "+(O.in_stock?"#bbf7d0":"#fecaca")}}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[t.jsx(n,{variant:"body1",sx:{color:O.in_stock?"#166534":"#991b1b",fontWeight:600,fontFamily:'"Montserrat", sans-serif'},children:O.in_stock?"In Stock":"Out of Stock"}),t.jsx(n,{variant:"body2",sx:{color:O.in_stock?"#15803d":"#b91c1c",fontFamily:'"Nunito Sans", sans-serif'},children:O.in_stock?`${O.stock} units available`:"Currently unavailable"})]})]}),t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:"#f0f8ff",borderRadius:2,border:"1px solid #bfdbfe",flex:1},children:[t.jsx(i,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"#3b82f6",boxShadow:"0 0 0 2px #bfdbfe"}}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[t.jsx(n,{variant:"body1",sx:{color:"#1e40af",fontWeight:600,fontFamily:'"Montserrat", sans-serif'},children:"Fast Delivery"}),t.jsx(n,{variant:"body2",sx:{color:"#1d4ed8",fontFamily:'"Nunito Sans", sans-serif'},children:"Within 3 to 5 days"})]})]})]}),O.variants&&O.variants.length>0&&t.jsx(i,{sx:{mb:3},children:O.variants.map((e,s)=>t.jsxs(i,{sx:{mb:2},children:[t.jsxs(n,{variant:"subtitle1",sx:{fontWeight:600,mb:1.5,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:["Select ",e.name]}),t.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.values?.map((s,o)=>t.jsx(a,{variant:Y[e.name]===s?"contained":"outlined",onClick:()=>{return o=e.name,r=s,void P(e=>({...e,[o]:r}));var o,r},sx:{minWidth:80,py:1,px:2,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"0.9rem",...Y[e.name]===s&&{bgcolor:"#E91E63",color:"white","&:hover":{bgcolor:"#C2185B"}},...Y[e.name]!==s&&{borderColor:"#e0e0e0",color:"#333","&:hover":{borderColor:"#E91E63",color:"#E91E63"}}},children:s},o))})]},s))}),t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.jsx(a,{variant:"contained",size:"large",fullWidth:!0,disabled:!O.in_stock||Z,onClick:Ne,startIcon:t.jsx(m,{}),sx:{py:2.5,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:700,textTransform:"none",fontSize:"1.1rem",borderRadius:3,boxShadow:"0 8px 25px rgba(102, 126, 234, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)",boxShadow:"0 12px 35px rgba(102, 126, 234, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%)",color:"#666",boxShadow:"none",transform:"none"}},children:Z?"Adding to Cart...":O.in_stock?"Add to Cart":"Out of Stock"}),t.jsx(a,{variant:"contained",size:"large",fullWidth:!0,disabled:!O.in_stock||ee,onClick:async()=>{if(O)if(A){se(!0);try{await T(O,1,Y),setTimeout(()=>{M("/checkout")},100)}catch(e){"LOGIN_REQUIRED"===e.message?q(!0):"OUT_OF_STOCK"===e.message?V({open:!0,message:"Sorry, this product is currently out of stock",severity:"warning"}):V({open:!0,message:e.message||"Failed to add to cart",severity:"error"})}finally{se(!1)}}else q(!0)},sx:{py:2.5,background:"linear-gradient(135deg, #E91E63 0%, #C2185B 100%)",color:"white",fontWeight:700,textTransform:"none",fontSize:"1.1rem",borderRadius:3,boxShadow:"0 8px 25px rgba(233, 30, 99, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #C2185B 0%, #AD1457 100%)",boxShadow:"0 12px 35px rgba(233, 30, 99, 0.4)",transform:"translateY(-2px)"},"&:disabled":{background:"linear-gradient(135deg, #e0e0e0 0%, #bdbdbd 100%)",color:"#666",boxShadow:"none",transform:"none"}},children:ee?"Processing...":O.in_stock?"Buy Now":"Out of Stock"}),t.jsx(a,{variant:"outlined",size:"small",onClick:()=>{navigator.share?navigator.share({title:O.name,text:O.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),V({open:!0,message:"Link copied to clipboard!",severity:"success"}))},startIcon:t.jsx(b,{}),sx:{py:1,px:2,alignSelf:"flex-start",borderColor:"#667eea",color:"#667eea",fontWeight:500,textTransform:"none",fontSize:"0.8rem",borderRadius:2,borderWidth:1,minWidth:"120px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"#5a6fd8",backgroundColor:"rgba(102, 126, 234, 0.05)",transform:"translateY(-1px)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.2)"}},children:"Share"})]}),O.description&&t.jsxs(i,{sx:{mt:4,pt:4,borderTop:"1px solid #e0e0e0"},children:[t.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:3,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:"Product Description"}),Pe.main&&t.jsx(i,{sx:{color:"#555",lineHeight:1.7,mb:3,fontFamily:'"Nunito Sans", sans-serif',fontSize:"1rem","& p":{marginBottom:"1rem","&:last-child":{marginBottom:0}},"& ul":{paddingLeft:"1.5rem",marginBottom:"1rem"},"& li":{marginBottom:"0.5rem","& strong":{fontWeight:600,color:"#333"}},"& strong":{fontWeight:600,color:"#333"}},children:Pe.isHtml?t.jsx("div",{dangerouslySetInnerHTML:{__html:Pe.main}}):t.jsx(n,{variant:"body1",children:Pe.main})}),!Pe.isHtml&&Object.keys(Pe.sections).length>0&&t.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.entries(Pe.sections).map(([e,s])=>t.jsxs(i,{sx:{p:2,bgcolor:"#f8f9fa",borderRadius:2,border:"1px solid #e9ecef"},children:[t.jsx(n,{variant:"subtitle2",sx:{fontWeight:700,color:"#333",mb:1,fontFamily:'"Montserrat", sans-serif',textTransform:"uppercase",letterSpacing:"0.5px"},children:e.replace(/_/g," ")}),t.jsx(n,{variant:"body2",sx:{color:"#666",lineHeight:1.6,fontFamily:'"Nunito Sans", sans-serif'},children:s})]},e))})]})]})]}),t.jsxs(i,{sx:{mt:2},children:[t.jsx(n,{variant:"h6",sx:{fontWeight:600,mb:1,color:"#333",fontFamily:'"Montserrat", sans-serif'},children:"Customer Reviews"}),oe&&t.jsxs(i,{sx:{mb:3,p:2,bgcolor:"#f8f9fa",borderRadius:2},children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,mb:1.5},children:[t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(n,{variant:"h4",sx:{fontWeight:700,color:"#E91E63",fontFamily:'"Montserrat", sans-serif'},children:oe.average_rating}),t.jsx(i,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(e=>t.jsx(i,{component:"span",sx:{color:e<=oe.average_rating?"#FFD700":"#ddd",fontSize:"1.5rem"},children:"★"},e))})]}),t.jsxs(n,{variant:"body1",sx:{color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:["Based on ",oe.total_reviews," reviews"]}),t.jsx(a,{variant:"contained",onClick:()=>ce(!0),sx:{bgcolor:"#E91E63",color:"white","&:hover":{bgcolor:"#C2185B"}},children:"Write a Review"})]}),oe.total_reviews>0&&t.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:1},children:[5,4,3,2,1].map(e=>t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsxs(n,{variant:"body2",sx:{minWidth:20,fontFamily:'"Nunito Sans", sans-serif'},children:[e,"★"]}),t.jsx(i,{sx:{flex:1,bgcolor:"#ddd",height:8,borderRadius:4,overflow:"hidden"},children:t.jsx(i,{sx:{width:`${oe.rating_percentages[e]}%`,height:"100%",bgcolor:"#E91E63",borderRadius:4}})}),t.jsx(n,{variant:"body2",sx:{minWidth:40,textAlign:"right",fontFamily:'"Nunito Sans", sans-serif'},children:oe.rating_distribution[e]})]},e))})]}),t.jsx(i,{sx:{mb:4},children:ne?t.jsx(i,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(n,{sx:{fontFamily:'"Nunito Sans", sans-serif'},children:"Loading reviews..."})}):te.length>0?t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:3},children:[te.map(e=>t.jsxs(i,{sx:{p:3,border:"1px solid #e0e0e0",borderRadius:2},children:[t.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(i,{children:[t.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,mb:.5,fontFamily:'"Montserrat", sans-serif'},children:e.customer_name}),t.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(i,{sx:{display:"flex",gap:.2},children:[1,2,3,4,5].map(s=>t.jsx(i,{component:"span",sx:{color:s<=e.rating?"#FFD700":"#ddd",fontSize:"0.9rem"},children:"★"},s))}),t.jsx(n,{variant:"body2",sx:{color:"#666",fontFamily:'"Nunito Sans", sans-serif'},children:new Date(e.created_at).toLocaleDateString()})]})]}),e.is_verified_purchase&&t.jsx(p,{label:"Verified Purchase",size:"small",sx:{bgcolor:"#4caf50",color:"white",fontSize:"0.7rem"}})]}),t.jsx(n,{variant:"body1",sx:{mb:2,lineHeight:1.6,fontFamily:'"Nunito Sans", sans-serif'},children:e.review_text}),e.admin_reply&&t.jsxs(i,{sx:{mt:2,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:[t.jsx(n,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"#E91E63"},children:"Store Response"}),t.jsx(n,{variant:"body2",children:e.admin_reply})]})]},e.review_id)),t.jsx(i,{sx:{textAlign:"center",mt:3,pt:3,borderTop:"1px solid #e0e0e0"},children:t.jsx(a,{variant:"contained",onClick:()=>ce(!0),sx:{bgcolor:"#E91E63",color:"white",px:4,py:1.5,"&:hover":{bgcolor:"#C2185B"}},children:"Write a Review"})})]}):t.jsxs(i,{sx:{textAlign:"center",py:4},children:[t.jsx(n,{variant:"body1",sx:{color:"#666",mb:2,fontFamily:'"Nunito Sans", sans-serif'},children:"No reviews yet. Be the first to review this product!"}),t.jsx(a,{variant:"contained",onClick:()=>ce(!0),sx:{bgcolor:"white",color:"#E91E63","&:hover":{bgcolor:"#f5f5f5",color:"#C2185B"}},children:"Write the First Review"})]})})]}),t.jsxs(u,{open:le,onClose:()=>ce(!1),maxWidth:"sm",fullWidth:!0,children:[t.jsx(y,{sx:{borderBottom:"1px solid #e0e0e0",bgcolor:"#E91E63",color:"white"},children:t.jsx(n,{variant:"h6",sx:{fontWeight:600,color:"white",fontFamily:'"Montserrat", sans-serif'},children:"Write a Review"})}),t.jsx(j,{sx:{pt:3},children:t.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:3},children:[t.jsxs(i,{children:[t.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,mb:1,fontFamily:'"Montserrat", sans-serif'},children:"Rating *"}),t.jsx(i,{sx:{display:"flex",gap:1},children:[1,2,3,4,5].map(e=>t.jsx(d,{onClick:()=>Ae("rating",e),sx:{color:e<=de.rating?"#FFD700":"#ddd",fontSize:"2rem","&:hover":{color:e<=de.rating?"#FFD700":"#ccc"}},children:"★"},e))})]}),t.jsx(v,{label:"Your Name *",value:de.customer_name,onChange:e=>Ae("customer_name",e.target.value),fullWidth:!0,variant:"outlined"}),t.jsx(v,{label:"Your Email *",type:"email",value:de.customer_email,onChange:e=>Ae("customer_email",e.target.value),fullWidth:!0,variant:"outlined"}),t.jsx(v,{label:"Your Review *",value:de.review_text,onChange:e=>Ae("review_text",e.target.value),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",placeholder:"Share your experience with this product...",sx:{"& .MuiInputLabel-root":{fontFamily:'"Nunito Sans", sans-serif'},"& .MuiInputBase-input":{fontFamily:'"Nunito Sans", sans-serif'}}})]})}),t.jsxs(w,{sx:{p:3,borderTop:"1px solid #e0e0e0",bgcolor:"#E91E63"},children:[t.jsx(a,{onClick:()=>ce(!1),sx:{color:"white"},children:"Cancel"}),t.jsx(a,{onClick:async()=>{if(de.rating&&de.review_text&&de.customer_name&&de.customer_email){fe(!0);try{const e=await z.post(`/product/${D}/review`,de);e.data?.success&&(V({open:!0,message:"Review submitted successfully!",severity:"success"}),ce(!1),xe({rating:0,review_text:"",customer_name:"",customer_email:""}),He(),Te())}catch(e){V({open:!0,message:e.response?.data?.error||"Failed to submit review",severity:"error"})}finally{fe(!1)}}else V({open:!0,message:"Please fill all required fields",severity:"error"})},variant:"contained",disabled:he,sx:{bgcolor:"white",color:"#E91E63","&:hover":{bgcolor:"#f5f5f5",color:"#C2185B"},"&:disabled":{bgcolor:"#ccc",color:"#666"}},children:he?"Submitting...":"Submit Review"})]})]}),t.jsx(u,{open:ge.open,onClose:De,maxWidth:!1,PaperProps:{sx:{width:"100vw",height:"100vh",maxWidth:"100vw",maxHeight:"100vh",m:0,bgcolor:"rgba(0, 0, 0, 0.95)",borderRadius:0,overflow:"hidden"}},onWheel:e=>{if(ge.open){e.preventDefault();const s=e.deltaY>0?-.1:.1;be(e=>Math.max(.5,Math.min(3,e+s)))}},children:t.jsxs(i,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative"},children:[t.jsxs(i,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,display:"flex",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)"},children:[t.jsxs(n,{variant:"h6",sx:{color:"white",fontWeight:600},children:[O?.name||"Product Image"," (",We+1," / ",ze.length,")"]}),t.jsxs(i,{sx:{display:"flex",gap:1},children:[t.jsx(d,{onClick:()=>{be(e=>Math.max(e-.25,.5))},disabled:me<=.5,sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"},"&:disabled":{opacity:.3}},children:t.jsx(S,{})}),t.jsx(d,{onClick:()=>{be(1),ye({x:0,y:0})},sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"},minWidth:"80px"},children:t.jsxs(n,{variant:"body2",sx:{fontSize:"0.875rem"},children:[Math.round(100*me),"%"]})}),t.jsx(d,{onClick:()=>{be(e=>Math.min(e+.25,3))},disabled:me>=3,sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.2)"},"&:disabled":{opacity:.3}},children:t.jsx(k,{})}),t.jsx(d,{onClick:De,sx:{color:"white",bgcolor:"rgba(255, 255, 255, 0.1)","&:hover":{bgcolor:"rgba(255, 0, 0, 0.3)"}},children:t.jsx(C,{})})]})]}),t.jsx(i,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative",cursor:me>1?je?"grabbing":"grab":"default"},onMouseDown:e=>{me>1&&(ve(!0),Se({x:e.clientX-ue.x,y:e.clientY-ue.y}))},onMouseMove:e=>{je&&me>1&&ye({x:e.clientX-we.x,y:e.clientY-we.y})},onMouseUp:Me,onMouseLeave:Me,children:t.jsx(i,{component:"img",src:ge.image,alt:O?.name||"Product",sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",transform:`scale(${me}) translate(${ue.x/me}px, ${ue.y/me}px)`,transition:je?"none":"transform 0.1s ease-out",userSelect:"none",WebkitUserDrag:"none"}})}),ze.length>1&&t.jsxs(t.Fragment,{children:[t.jsx(d,{onClick:()=>{const e=(ge.index-1+ze.length)%ze.length;Re(ze[e],e)},sx:{position:"absolute",left:20,top:"50%",transform:"translateY(-50%)",color:"white",bgcolor:"rgba(255, 255, 255, 0.2)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.3)"},zIndex:1e3},children:t.jsx(x,{})}),t.jsx(d,{onClick:()=>{const e=(ge.index+1)%ze.length;Re(ze[e],e)},sx:{position:"absolute",right:20,top:"50%",transform:"translateY(-50%)",color:"white",bgcolor:"rgba(255, 255, 255, 0.2)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.3)"},zIndex:1e3},children:t.jsx(h,{})})]}),ze.length>1&&t.jsx(i,{sx:{position:"absolute",bottom:0,left:0,right:0,zIndex:1e3,display:"flex",justifyContent:"center",gap:1,p:2,bgcolor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",overflowX:"auto"},children:ze.map((e,s)=>t.jsx(i,{component:"img",src:e,alt:`Thumbnail ${s+1}`,onClick:()=>{pe(o=>({...o,image:e,index:s})),_e(s),be(1),ye({x:0,y:0})},sx:{width:80,height:80,objectFit:"cover",borderRadius:1,border:ge.index===s?"3px solid #667eea":"2px solid transparent",cursor:"pointer",opacity:ge.index===s?1:.7,transition:"all 0.3s","&:hover":{opacity:1,transform:"scale(1.1)"}}},s))})]})}),t.jsx(I,{open:X,onClose:()=>q(!1),onLoginSuccess:e=>{q(!1),B(e),Ne()},message:"Please login to add items to cart"}),t.jsx(F,{open:Q.open,autoHideDuration:3e3,onClose:()=>V({...Q,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(W,{onClose:()=>V({...Q,open:!1}),severity:Q.severity,sx:{width:"100%"},children:Q.message})})]})};export{D as default};
